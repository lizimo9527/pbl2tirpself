{"version":3,"file":"create.js","sources":["pages/create/create.vue","../../../Adownloads/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY3JlYXRlL2NyZWF0ZS52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"create-container\">\r\n\t\t<view class=\"create-header\">\r\n\t\t\t<text class=\"create-title\">创建攻略</text>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"form-section\">\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"form-label\">攻略标题</text>\r\n\t\t\t\t<input class=\"form-input\" placeholder=\"请输入攻略标题\" @input=\"onTitleInput\" :value=\"title\" />\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"form-label\">目的地</text>\r\n\t\t\t\t<input class=\"form-input\" placeholder=\"请输入目的地\" @input=\"onDestinationInput\" :value=\"destination\" />\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 地图展示模块 -->\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<view class=\"map-section-header\">\r\n\t\t\t\t\t<text class=\"form-label\">地图定位</text>\r\n\t\t\t\t\t<view class=\"map-controls\">\r\n\t\t\t\t\t\t<button class=\"map-control-btn\" @click=\"locateOnMap\">定位</button>\r\n\t\t\t\t\t\t<button class=\"map-control-btn\" @click=\"searchOnMap\">搜索</button>\r\n\t\t\t\t\t\t<button class=\"map-control-btn\" @click=\"clearMarkers\">清除标记</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"map-container\">\r\n\t\t\t\t\t<map \r\n\t\t\t\t\t\tid=\"createMap\"\r\n\t\t\t\t\t\t:longitude=\"mapCenter.longitude\"\r\n\t\t\t\t\t\t:latitude=\"mapCenter.latitude\"\r\n\t\t\t\t\t\t:scale=\"mapScale\"\r\n\t\t\t\t\t\t:markers=\"markers\"\r\n\t\t\t\t\t\t:show-location=\"true\"\r\n\t\t\t\t\t\t:enable-zoom=\"true\"\r\n\t\t\t\t\t\t:enable-scroll=\"true\"\r\n\t\t\t\t\t\tclass=\"tencent-map\"\r\n\t\t\t\t\t\t@tap=\"onMapTap\"\r\n\t\t\t\t\t\t@markertap=\"onMarkerTap\"\r\n\t\t\t\t\t></map>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 地图加载状态 -->\r\n\t\t\t\t\t<view class=\"map-loading\" v-if=\"isMapLoading\">\r\n\t\t\t\t\t\t<text class=\"loading-text\">地图加载中...</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 坐标信息显示 -->\r\n\t\t\t\t\t<view class=\"map-coordinates\" v-if=\"selectedLocation\">\r\n\t\t\t\t\t\t<text class=\"coordinate-text\">经度: {{selectedLocation.longitude.toFixed(6)}}</text>\r\n\t\t\t\t\t\t<text class=\"coordinate-text\">纬度: {{selectedLocation.latitude.toFixed(6)}}</text>\r\n\t\t\t\t\t\t<text class=\"coordinate-text\" v-if=\"selectedLocation.address\">地址: {{selectedLocation.address}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"form-label\">攻略内容</text>\r\n\t\t\t\t<textarea class=\"form-textarea\" placeholder=\"请输入详细的攻略内容...\" @input=\"onContentInput\" :value=\"content\" maxlength=\"1000\" />\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"form-label\">上传图片</text>\r\n\t\t\t\t<view class=\"image-upload\">\r\n\t\t\t\t\t<view class=\"upload-btn\" @click=\"chooseImage\">\r\n\t\t\t\t\t\t<text class=\"upload-icon\">+</text>\r\n\t\t\t\t\t\t<text class=\"upload-text\">添加图片</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"image-preview\" v-if=\"imagePath\">\r\n\t\t\t\t\t\t<image :src=\"imagePath\" mode=\"aspectFill\" class=\"preview-image\" />\r\n\t\t\t\t\t\t<view class=\"remove-btn\" @click=\"removeImage\">×</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-item\">\r\n\t\t\t\t<text class=\"form-label\">标签</text>\r\n\t\t\t\t<view class=\"tags-container\">\r\n\t\t\t\t\t<view class=\"tag-input-container\">\r\n\t\t\t\t\t\t<input class=\"tag-input\" placeholder=\"输入标签后按回车\" @input=\"onTagInput\" :value=\"tagInput\" @confirm=\"addTag\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tags-list\">\r\n\t\t\t\t\t\t<view class=\"tag-item\" v-for=\"(tag, index) in tags\" :key=\"index\">\r\n\t\t\t\t\t\t\t<text class=\"tag-text\">{{tag}}</text>\r\n\t\t\t\t\t\t\t<text class=\"tag-remove\" @click=\"removeTag(index)\">×</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"action-buttons\">\r\n\t\t\t<button class=\"save-btn\" @click=\"saveDraft\">保存草稿</button>\r\n\t\t\t<button class=\"publish-btn\" @click=\"publishGuide\">发布攻略</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { mapConfig, mapUtils } from '@/config/map.config.js'\r\n\timport guideService from '@/services/guideService.js'\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tdestination: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\timagePath: '',\r\n\t\t\t\ttagInput: '',\r\n\t\t\t\ttags: [],\r\n\t\t\t\t\r\n\t\t\t\t// 编辑模式相关\r\n\t\t\t\teditMode: false,\r\n\t\t\t\tguideId: '',\r\n\t\t\t\t\r\n\t\t\t\t// 地图相关数据\r\n\t\t\t\tmapCenter: {\r\n\t\t\t\t\tlongitude: mapConfig.defaultCenter.longitude,\r\n\t\t\t\t\tlatitude: mapConfig.defaultCenter.latitude\r\n\t\t\t\t},\r\n\t\t\t\tmapScale: mapConfig.zoomLevel,\r\n\t\t\t\tmarkers: [],\r\n\t\t\t\tselectedLocation: null,\r\n\t\t\t\tisMapLoading: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonTitleInput(e) {\r\n\t\t\t\tthis.title = e.detail.value;\r\n\t\t\t},\r\n\t\t\tonDestinationInput(e) {\r\n\t\t\t\tthis.destination = e.detail.value;\r\n\t\t\t},\r\n\t\t\tonContentInput(e) {\r\n\t\t\t\tthis.content = e.detail.value;\r\n\t\t\t},\r\n\t\t\tonTagInput(e) {\r\n\t\t\t\tthis.tagInput = e.detail.value;\r\n\t\t\t},\r\n\t\t\taddTag() {\r\n\t\t\t\tconst tag = this.tagInput.trim();\r\n\t\t\t\tif (tag && this.tags.length < 5) {\r\n\t\t\t\t\tthis.tags = [...this.tags, tag];\r\n\t\t\t\t\tthis.tagInput = '';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveTag(index) {\r\n\t\t\t\tconst newTags = [...this.tags];\r\n\t\t\t\tnewTags.splice(index, 1);\r\n\t\t\t\tthis.tags = newTags;\r\n\t\t\t},\r\n\t\t\tchooseImage() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsizeType: ['compressed'],\r\n\t\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.imagePath = res.tempFilePaths[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tremoveImage() {\r\n\t\t\t\tthis.imagePath = '';\r\n\t\t\t},\r\n\r\n\t\t\t// 地图相关方法\r\n\t\t\tasync locateOnMap() {\r\n\t\t\t\tif (!this.destination.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请先输入目的地',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.isMapLoading = true;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '正在定位...'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 使用腾讯地图API进行地理编码\r\n\t\t\t\t\tconst result = await mapUtils.geocode(this.destination);\r\n\t\t\t\t\tif (result && result.location) {\r\n\t\t\t\t\t\tthis.selectedLocation = {\r\n\t\t\t\t\t\t\tlongitude: result.location.lng,\r\n\t\t\t\t\t\t\tlatitude: result.location.lat,\r\n\t\t\t\t\t\t\taddress: result.address\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 移动地图到目的地\r\n\t\t\t\t\t\tthis.mapCenter.longitude = result.location.lng;\r\n\t\t\t\t\t\tthis.mapCenter.latitude = result.location.lat;\r\n\t\t\t\t\t\tthis.mapScale = 16;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 添加目的地标记\r\n\t\t\t\t\t\tthis.addMarker({\r\n\t\t\t\t\t\t\tid: Date.now(),\r\n\t\t\t\t\t\t\tlongitude: result.location.lng,\r\n\t\t\t\t\t\t\tlatitude: result.location.lat,\r\n\t\t\t\t\t\t\ttitle: this.destination,\r\n\t\t\t\t\t\t\ticonPath: '/static/images/map/marker.png',\r\n\t\t\t\t\t\t\twidth: 30,\r\n\t\t\t\t\t\t\theight: 30,\r\n\t\t\t\t\t\t\tcallout: {\r\n\t\t\t\t\t\t\t\tcontent: this.destination,\r\n\t\t\t\t\t\t\t\tcolor: '#ffffff',\r\n\t\t\t\t\t\t\t\tbgColor: '#1A9E8F',\r\n\t\t\t\t\t\t\t\tdisplay: 'ALWAYS'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '定位成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('定位失败:', error);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '定位失败，请检查地址是否正确',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.isMapLoading = false;\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tsearchOnMap() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请在地图上点击添加标记',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 地图点击事件\r\n\t\t\tonMapTap(e) {\r\n\t\t\t\tconst { latitude, longitude } = e.detail;\r\n\t\t\t\t\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '添加标记',\r\n\t\t\t\t\tcontent: '是否在此位置添加标记？',\r\n\t\t\t\t\tshowCancel: true,\r\n\t\t\t\t\tcancelText: '取消',\r\n\t\t\t\t\tconfirmText: '添加',\r\n\t\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t// 获取地址信息\r\n\t\t\t\t\t\t\t\tconst addressInfo = await mapUtils.reverseGeocode(latitude, longitude);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.addMarker({\r\n\t\t\t\t\t\t\t\t\tid: Date.now(),\r\n\t\t\t\t\t\t\t\t\tlongitude: longitude,\r\n\t\t\t\t\t\t\t\t\tlatitude: latitude,\r\n\t\t\t\t\t\t\t\t\ttitle: addressInfo.address || '自定义标记',\r\n\t\t\t\t\t\t\t\t\ticonPath: '/static/images/map/marker.png',\r\n\t\t\t\t\t\t\t\t\twidth: 30,\r\n\t\t\t\t\t\t\t\t\theight: 30\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 更新选中位置信息\r\n\t\t\t\t\t\t\t\tthis.selectedLocation = {\r\n\t\t\t\t\t\t\t\t\tlongitude: longitude,\r\n\t\t\t\t\t\t\t\t\tlatitude: latitude,\r\n\t\t\t\t\t\t\t\t\taddress: addressInfo.address\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '标记添加成功',\r\n\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\tconsole.error('添加标记失败:', error);\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '标记添加失败',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 标记点点击事件\r\n\t\t\tonMarkerTap(e) {\r\n\t\t\t\tconst markerId = e.markerId;\r\n\t\t\t\tconst marker = this.markers.find(m => m.id === markerId);\r\n\t\t\t\tif (marker) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: marker.title,\r\n\t\t\t\t\t\tcontent: '您想对这个地点做什么？',\r\n\t\t\t\t\t\tshowCancel: true,\r\n\t\t\t\t\t\tcancelText: '取消',\r\n\t\t\t\t\t\tconfirmText: '设为目的地',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tthis.destination = marker.title;\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '已设为目的地',\r\n\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 添加标记\r\n\t\t\taddMarker(marker) {\r\n\t\t\t\tthis.markers.push(marker);\r\n\t\t\t},\r\n\r\n\t\t\tclearMarkers() {\r\n\t\t\t\tif (this.markers.length === 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '暂无标记可清除',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '确认清除',\r\n\t\t\t\t\tcontent: '确定要清除所有地图标记吗？',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tthis.markers = [];\r\n\t\t\t\t\t\t\tthis.selectedLocation = null;\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '标记已清除',\r\n\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsaveDraft() {\r\n\t\t\t\tif (!this.title.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入攻略标题',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst draftData = {\r\n\t\t\t\t\ttitle: this.title,\r\n\t\t\t\t\tdestination: this.destination,\r\n\t\t\t\t\tcontent: this.content,\r\n\t\t\t\t\ttags: this.tags,\r\n\t\t\t\t\timagePath: this.imagePath,\r\n\t\t\t\t\tmapMarkers: this.markers,\r\n\t\t\t\t\tselectedLocation: this.selectedLocation,\r\n\t\t\t\t\tcreateTime: new Date().toISOString(),\r\n\t\t\t\t\tstatus: 'draft'\r\n\t\t\t\t};\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 保存为草稿攻略\r\n\t\t\t\t\tconst guideData = {\r\n\t\t\t\t\t\t...draftData,\r\n\t\t\t\t\t\tstatus: 'draft',\r\n\t\t\t\t\t\tpublishTime: null\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst success = guideService.saveGuide(guideData);\r\n\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '草稿保存成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 延迟跳转到首页\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, 1500);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '保存失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '保存失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpublishGuide() {\r\n\t\t\t\tif (!this.title.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入攻略标题',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.content.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入攻略内容',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst guideData = {\r\n\t\t\t\t\ttitle: this.title,\r\n\t\t\t\t\tdestination: this.destination,\r\n\t\t\t\t\tcontent: this.content,\r\n\t\t\t\t\ttags: this.tags,\r\n\t\t\t\t\timagePath: this.imagePath,\r\n\t\t\t\t\tmapMarkers: this.markers,\r\n\t\t\t\t\tselectedLocation: this.selectedLocation,\r\n\t\t\t\t\tpublishTime: new Date().toISOString(),\r\n\t\t\t\t\tstatus: 'published',\r\n\t\t\t\t\tauthor: 'default'\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// 如果是编辑模式，设置ID\r\n\t\t\t\tif (this.editMode && this.guideId) {\r\n\t\t\t\t\tguideData.id = this.guideId;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: this.editMode ? '更新中...' : '发布中...'\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tconst success = guideService.saveGuide(guideData);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: this.editMode ? '更新成功' : '发布成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 清除草稿\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tuni.removeStorageSync('guideDraft');\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tconsole.log('清除草稿失败');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 发布成功后跳转到首页\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, 1500);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: this.editMode ? '更新失败' : '发布失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 清空草稿数据（不再加载草稿）\r\n\t\t\tclearDraftData() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 清除本地存储的草稿数据\r\n\t\t\t\t\tuni.removeStorageSync('guideDraft');\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log('清除草稿数据失败');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 加载攻略数据（编辑模式）\r\n\t\t\tloadGuideData() {\r\n\t\t\t\tconst guide = guideService.getGuideById(this.guideId);\r\n\t\t\t\tif (guide) {\r\n\t\t\t\t\tthis.title = guide.title || '';\r\n\t\t\t\t\tthis.destination = guide.destination || '';\r\n\t\t\t\t\tthis.content = guide.content || '';\r\n\t\t\t\t\tthis.tags = guide.tags || [];\r\n\t\t\t\t\tthis.imagePath = guide.imagePath || '';\r\n\t\t\t\t\tthis.markers = guide.mapMarkers || [];\r\n\t\t\t\t\tthis.selectedLocation = guide.selectedLocation || null;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 如果有位置信息，设置地图中心\r\n\t\t\t\t\tif (this.selectedLocation) {\r\n\t\t\t\t\t\tthis.mapCenter.longitude = this.selectedLocation.longitude;\r\n\t\t\t\t\t\tthis.mapCenter.latitude = this.selectedLocation.latitude;\r\n\t\t\t\t\t\tthis.mapScale = 14;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 清空表单数据\r\n\t\t\tclearFormData() {\r\n\t\t\t\tthis.title = '';\r\n\t\t\t\tthis.destination = '';\r\n\t\t\t\tthis.content = '';\r\n\t\t\t\tthis.imagePath = '';\r\n\t\t\t\tthis.tags = [];\r\n\t\t\t\tthis.markers = [];\r\n\t\t\t\tthis.selectedLocation = null;\r\n\t\t\t\tthis.tagInput = '';\r\n\t\t\t\t\r\n\t\t\t\t// 重置地图中心\r\n\t\t\t\tthis.mapCenter = {\r\n\t\t\t\t\tlongitude: mapConfig.defaultCenter.longitude,\r\n\t\t\t\t\tlatitude: mapConfig.defaultCenter.latitude\r\n\t\t\t\t};\r\n\t\t\t\tthis.mapScale = mapConfig.zoomLevel;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tonLoad(options) {\r\n\t\t\t// 检查是否是编辑模式\r\n\t\t\tif (options.id && options.mode === 'edit') {\r\n\t\t\t\tthis.editMode = true;\r\n\t\t\t\tthis.guideId = options.id;\r\n\t\t\t\tthis.loadGuideData();\r\n\t\t\t} else {\r\n\t\t\t\t// 正常创建模式，清空所有数据，确保每次进入都是空的\r\n\t\t\t\tthis.clearFormData();\r\n\t\t\t\tthis.clearDraftData();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonShow() {\r\n\t\t\t// 如果是创建模式，每次显示时清空数据\r\n\t\t\tif (!this.editMode) {\r\n\t\t\t\tthis.clearFormData();\r\n\t\t\t\tthis.clearDraftData();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.create-container {\r\n\t\tmin-height: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbackground-color: #ffffff;\r\n\t\tpadding: 30rpx;\r\n\t}\r\n\t\r\n\t.create-header {\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t\r\n\t.create-title {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333333;\r\n\t}\r\n\t\r\n\t.form-section {\r\n\t\tflex: 1;\r\n\t}\r\n\t\r\n\t.form-item {\r\n\t\tmargin-bottom: 40rpx;\r\n\t}\r\n\t\r\n\t.form-label {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333333;\r\n\t\tmargin-bottom: 15rpx;\r\n\t}\r\n\t\r\n\t.form-input {\r\n\t\twidth: 100%;\r\n\t\theight: 80rpx;\r\n\t\tpadding: 0 20rpx;\r\n\t\tborder: 2rpx solid #e5e5e5;\r\n\t\tborder-radius: 10rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tbackground-color: #f9f9f9;\r\n\t}\r\n\t\r\n\t.form-textarea {\r\n\t\twidth: 100%;\r\n\t\theight: 200rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tborder: 2rpx solid #e5e5e5;\r\n\t\tborder-radius: 10rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tbackground-color: #f9f9f9;\r\n\t}\r\n\r\n\t/* 地图模块样式 */\r\n\t.map-section-header {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmargin-bottom: 15rpx;\r\n\t}\r\n\r\n\t.map-controls {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 15rpx;\r\n\t\tmargin-top: 15rpx;\r\n\t}\r\n\r\n\t.map-control-btn {\r\n\t\tbackground-color: #1A9E8F;\r\n\t\tcolor: white;\r\n\t\tborder-radius: 8rpx;\r\n\t\tpadding: 15rpx 20rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tborder: none;\r\n\t\ttext-align: center;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.map-control-btn:active {\r\n\t\tbackground-color: #15897A;\r\n\t\ttransform: scale(0.98);\r\n\t}\r\n\r\n\t.map-container {\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 15rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tborder: 2rpx solid #e5e5e5;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.tencent-map {\r\n\t\twidth: 100%;\r\n\t\theight: 300rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tmargin-bottom: 15rpx;\r\n\t}\r\n\r\n\t/* 地图加载状态 */\r\n\t.map-loading {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\tborder-radius: 15rpx;\r\n\t\tbox-shadow: 0 4rpx 15rpx rgba(0, 0, 0, 0.1);\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t.loading-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.map-coordinates {\r\n\t\tmargin-top: 15rpx;\r\n\t\tpadding: 15rpx;\r\n\t\tbackground-color: rgba(26, 158, 143, 0.1);\r\n\t\tborder-radius: 8rpx;\r\n\t\ttext-align: left;\r\n\t}\r\n\r\n\t.coordinate-text {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #1A9E8F;\r\n\t\tdisplay: block;\r\n\t\tmargin: 5rpx 0;\r\n\t\tline-height: 1.4;\r\n\t}\r\n\t\r\n\t.image-upload {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.upload-btn {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\twidth: 150rpx;\r\n\t\theight: 150rpx;\r\n\t\tborder: 2rpx dashed #e5e5e5;\r\n\t\tborder-radius: 10rpx;\r\n\t\tbackground-color: #f9f9f9;\r\n\t}\r\n\t\r\n\t.upload-icon {\r\n\t\tfont-size: 48rpx;\r\n\t\tcolor: #999999;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\t\r\n\t.upload-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999999;\r\n\t}\r\n\t\r\n\t.image-preview {\r\n\t\tposition: relative;\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\t\r\n\t.preview-image {\r\n\t\twidth: 150rpx;\r\n\t\theight: 150rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t}\r\n\t\r\n\t.remove-btn {\r\n\t\tposition: absolute;\r\n\t\ttop: -10rpx;\r\n\t\tright: -10rpx;\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tbackground-color: #ff4444;\r\n\t\tcolor: white;\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.tags-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t\r\n\t.tag-input-container {\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.tag-input {\r\n\t\twidth: 100%;\r\n\t\theight: 60rpx;\r\n\t\tpadding: 0 20rpx;\r\n\t\tborder: 2rpx solid #e5e5e5;\r\n\t\tborder-radius: 10rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tbackground-color: #f9f9f9;\r\n\t}\r\n\t\r\n\t.tags-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 15rpx;\r\n\t}\r\n\t\r\n\t.tag-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tbackground-color: #1A9E8F;\r\n\t\tborder-radius: 20rpx;\r\n\t\tcolor: white;\r\n\t}\r\n\t\r\n\t.tag-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n\t\r\n\t.tag-remove {\r\n\t\tfont-size: 20rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t\r\n\t.action-buttons {\r\n\t\tdisplay: flex;\r\n\t\tgap: 20rpx;\r\n\t\tmargin-top: 40rpx;\r\n\t}\r\n\t\r\n\t.save-btn, .publish-btn {\r\n\t\tflex: 1;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.save-btn {\r\n\t\tbackground-color: #f8f9fa;\r\n\t\tcolor: #666666;\r\n\t\tborder: 2rpx solid #e5e5e5;\r\n\t}\r\n\t\r\n\t.publish-btn {\r\n\t\tbackground-color: #1A9E8F;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/pbl2/tripself/pbl2tirpself/pages/create/create.vue'\nwx.createPage(MiniProgramPage)"],"names":["mapConfig","uni","mapUtils","guideService"],"mappings":"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"}