{"version":3,"file":"detail.js","sources":["pages/guide/detail/detail.vue","D:/studytools/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZ3VpZGUvZGV0YWlsL2RldGFpbC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"detail-container\">\r\n\t\t<view class=\"detail-header\">\r\n\t\t\t<view class=\"header-actions\">\r\n\t\t\t\t<button class=\"action-btn edit-btn\" @click=\"editGuide\">\r\n\t\t\t\t\t<text class=\"action-icon\">‚úèÔ∏è</text>\r\n\t\t\t\t\t<text class=\"action-text\">ÁºñËæë</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<button class=\"action-btn delete-btn\" @click=\"deleteGuide\">\r\n\t\t\t\t\t<text class=\"action-icon\">üóëÔ∏è</text>\r\n\t\t\t\t\t<text class=\"action-text\">Âà†Èô§</text>\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<scroll-view class=\"detail-content\" scroll-y>\r\n\t\t\t<view v-if=\"loading\" class=\"loading-state\">\r\n\t\t\t\t<text class=\"loading-text\">Âä†ËΩΩ‰∏≠...</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view v-else-if=\"!guide\" class=\"error-state\">\r\n\t\t\t\t<text class=\"error-icon\">‚ùå</text>\r\n\t\t\t\t<text class=\"error-text\">ÊîªÁï•‰∏çÂ≠òÂú®</text>\r\n\t\t\t\t<button class=\"back-btn\" @click=\"goBack\">ËøîÂõûÂàóË°®</button>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view v-else class=\"guide-detail\">\r\n\t\t\t\t<!-- Â∞ÅÈù¢ÂõæÁâá -->\r\n\t\t\t\t<view class=\"cover-section\">\r\n\t\t\t\t\t<view v-if=\"guide.imagePath\" class=\"cover-image\">\r\n\t\t\t\t\t\t<image :src=\"guide.imagePath\" mode=\"aspectFill\" class=\"cover-img\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-else class=\"cover-placeholder\">\r\n\t\t\t\t\t\t<text class=\"placeholder-icon\">üèûÔ∏è</text>\r\n\t\t\t\t\t\t<text class=\"placeholder-text\">ÊöÇÊó†Â∞ÅÈù¢</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- Âü∫Êú¨‰ø°ÊÅØ -->\r\n\t\t\t\t<view class=\"info-section\">\r\n\t\t\t\t\t<view class=\"title-section\">\r\n\t\t\t\t\t\t<text class=\"guide-title\">{{ guide.title }}</text>\r\n\t\t\t\t\t\t<view class=\"status-badge\" :class=\"guide.status\">\r\n\t\t\t\t\t\t\t<text>{{ guide.status === 'published' ? 'Â∑≤ÂèëÂ∏É' : 'ËçâÁ®ø' }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"destination-section\">\r\n\t\t\t\t\t\t<text class=\"destination-icon\">üìç</text>\r\n\t\t\t\t\t\t<text class=\"destination-text\">{{ guide.destination || 'Êú™ËÆæÁΩÆÁõÆÁöÑÂú∞' }}</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"meta-section\">\r\n\t\t\t\t\t\t<view class=\"meta-item\">\r\n\t\t\t\t\t\t\t<text class=\"meta-label\">ÂàõÂª∫Êó∂Èó¥:</text>\r\n\t\t\t\t\t\t\t<text class=\"meta-value\">{{ formatDate(guide.createTime) }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"meta-item\">\r\n\t\t\t\t\t\t\t<text class=\"meta-label\">Êõ¥Êñ∞Êó∂Èó¥:</text>\r\n\t\t\t\t\t\t\t<text class=\"meta-value\">{{ formatDate(guide.updateTime || guide.createTime) }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"meta-item\">\r\n\t\t\t\t\t\t\t<text class=\"meta-label\">ÂÜÖÂÆπÂ≠óÊï∞:</text>\r\n\t\t\t\t\t\t\t<text class=\"meta-value\">{{ guide.content ? guide.content.length : 0 }}Â≠ó</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- Ê†áÁ≠æ -->\r\n\t\t\t\t<view v-if=\"guide.tags && guide.tags.length > 0\" class=\"tags-section\">\r\n\t\t\t\t\t<text class=\"section-title\">Ê†áÁ≠æ</text>\r\n\t\t\t\t\t<view class=\"tags-list\">\r\n\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\tv-for=\"(tag, index) in guide.tags\" \r\n\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\tclass=\"tag\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<text class=\"tag-text\">{{ tag }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- ÊîªÁï•ÂÜÖÂÆπ -->\r\n\t\t\t\t<view class=\"content-section\">\r\n\t\t\t\t\t<text class=\"section-title\">ÊîªÁï•ÂÜÖÂÆπ</text>\r\n\t\t\t\t\t<view class=\"content-text\">\r\n\t\t\t\t\t\t<text>{{ guide.content || 'ÊöÇÊó†ÂÜÖÂÆπ' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- Âú∞Âõæ‰ΩçÁΩÆ -->\r\n\t\t\t\t<view v-if=\"guide.mapMarkers && guide.mapMarkers.length > 0\" class=\"map-section\">\r\n\t\t\t\t\t<text class=\"section-title\">Áõ∏ÂÖ≥‰ΩçÁΩÆ</text>\r\n\t\t\t\t\t<view class=\"map-container\">\r\n\t\t\t\t\t\t<map \r\n\t\t\t\t\t\t\t:longitude=\"guide.mapMarkers[0].longitude\"\r\n\t\t\t\t\t\t\t:latitude=\"guide.mapMarkers[0].latitude\"\r\n\t\t\t\t\t\t\t:scale=\"14\"\r\n\t\t\t\t\t\t\t:markers=\"guide.mapMarkers\"\r\n\t\t\t\t\t\t\t:polyline=\"getPolyline(guide.mapMarkers)\"\r\n\t\t\t\t\t\t\tclass=\"detail-map\"\r\n\t\t\t\t\t\t></map>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport guideService from '@/services/guideService.js'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tguideId: '',\r\n\t\t\t\tguide: null,\r\n\t\t\t\tloading: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tthis.guideId = options.id;\r\n\t\t\tthis.loadGuideDetail();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// Âä†ËΩΩÊîªÁï•ËØ¶ÊÉÖ\r\n\t\t\tloadGuideDetail() {\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.guide = guideService.getGuideById(this.guideId);\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t}, 500);\r\n\t\t\t},\r\n\r\n\t\t\t// ËøîÂõû‰∏ä‰∏ÄÈ°µ\r\n\t\t\tgoBack() {\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t},\r\n\r\n\t\t\t// ÁºñËæëÊîªÁï•\r\n\t\t\teditGuide() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/guide/edit/edit?id=${this.guideId}`\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// Âà†Èô§ÊîªÁï•\r\n\t\t\tdeleteGuide() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: 'Á°ÆËÆ§Âà†Èô§',\r\n\t\t\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ÊîªÁï•ÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§ç„ÄÇ',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tconst success = guideService.deleteGuide(this.guideId);\r\n\t\t\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: 'Âà†Èô§ÊàêÂäü',\r\n\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tuni.navigateBack();\r\n\t\t\t\t\t\t\t\t}, 1500);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: 'Âà†Èô§Â§±Ë¥•',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// Ê†ºÂºèÂåñÊó•Êúü\r\n\t\t\tformatDate(dateString) {\r\n\t\t\t\tconst date = new Date(dateString);\r\n\t\t\t\treturn date.getFullYear() + '-' + \r\n\t\t\t\t\t(date.getMonth() + 1).toString().padStart(2, '0') + '-' + \r\n\t\t\t\t\tdate.getDate().toString().padStart(2, '0') + ' ' +\r\n\t\t\t\t\tdate.getHours().toString().padStart(2, '0') + ':' +\r\n\t\t\t\t\tdate.getMinutes().toString().padStart(2, '0');\r\n\t\t\t},\r\n\r\n\t\t\t// Ëé∑ÂèñÊäòÁ∫øÊï∞ÊçÆ\r\n\t\t\tgetPolyline(markers) {\r\n\t\t\t\tif (!markers || markers.length < 2) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// ÂàõÂª∫ÊäòÁ∫øË∑ØÂæÑ\r\n\t\t\t\tconst points = markers.map(marker => ({\r\n\t\t\t\t\tlongitude: marker.longitude,\r\n\t\t\t\t\tlatitude: marker.latitude\r\n\t\t\t\t}));\r\n\r\n\t\t\t\treturn [{\r\n\t\t\t\t\tpoints: points,\r\n\t\t\t\t\tcolor: '#1A9E8F',\r\n\t\t\t\t\twidth: 4,\r\n\t\t\t\t\tarrowLine: true,\r\n\t\t\t\t\tborderWidth: 2,\r\n\t\t\t\t\tborderColor: '#FFFFFF'\r\n\t\t\t\t}];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.detail-container {\r\n\t\tmin-height: 100vh;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\r\n\t.detail-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\talign-items: center;\r\n\t\tpadding: 30rpx;\r\n\t\tbackground: white;\r\n\t\tborder-bottom: 1rpx solid #f0f0f0;\r\n\t}\r\n\r\n\t.header-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 15rpx;\r\n\t}\r\n\r\n\t.action-btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 12rpx 20rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t.action-icon {\r\n\t\tmargin-right: 6rpx;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.edit-btn {\r\n\t\tbackground: #e6f7ff;\r\n\t\tcolor: #1890ff;\r\n\t}\r\n\r\n\t.delete-btn {\r\n\t\tbackground: #fff2f0;\r\n\t\tcolor: #ff4d4f;\r\n\t}\r\n\r\n\t.detail-content {\r\n\t\theight: calc(100vh - 120rpx);\r\n\t}\r\n\r\n\t.loading-state, .error-state {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 200rpx 0;\r\n\t}\r\n\r\n\t.loading-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.error-icon {\r\n\t\tfont-size: 80rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\topacity: 0.5;\r\n\t}\r\n\r\n\t.error-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.back-btn {\r\n\t\tbackground: #1A9E8F;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tborder-radius: 8rpx;\r\n\t\tpadding: 15rpx 30rpx;\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t.guide-detail {\r\n\t\tpadding-bottom: 50rpx;\r\n\t}\r\n\r\n\t.cover-section {\r\n\t\tbackground: white;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.cover-image {\r\n\t\theight: 300rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.cover-img {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.cover-placeholder {\r\n\t\theight: 200rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground: #f8f9fa;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.placeholder-icon {\r\n\t\tfont-size: 60rpx;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\t.placeholder-text {\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.info-section {\r\n\t\tbackground: white;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.title-section {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: flex-start;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.guide-title {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t\tflex: 1;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\r\n\t.status-badge {\r\n\t\tfont-size: 22rpx;\r\n\t\tpadding: 6rpx 15rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.status-badge.published {\r\n\t\tbackground: #e8f5e8;\r\n\t\tcolor: #52c41a;\r\n\t}\r\n\r\n\t.status-badge.draft {\r\n\t\tbackground: #fff7e6;\r\n\t\tcolor: #fa8c16;\r\n\t}\r\n\r\n\t.destination-section {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 25rpx;\r\n\t}\r\n\r\n\t.destination-icon {\r\n\t\tmargin-right: 10rpx;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.destination-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.meta-section {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.meta-item {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.meta-label {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.meta-value {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.tags-section, .content-section, .map-section {\r\n\t\tbackground: white;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.section-title {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.tags-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 15rpx;\r\n\t}\r\n\r\n\t.tag {\r\n\t\tbackground: #f0f2f5;\r\n\t\tborder-radius: 8rpx;\r\n\t\tpadding: 8rpx 15rpx;\r\n\t}\r\n\r\n\t.tag-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.content-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tline-height: 1.6;\r\n\t\tcolor: #333;\r\n\t\twhite-space: pre-wrap;\r\n\t}\r\n\r\n\t.map-container {\r\n\t\theight: 300rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.detail-map {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/pbl2/tripself/pages/guide/detail/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["guideService","uni"],"mappings":";;;AAgHC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,OAAO;AAAA,MACP,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,OAAO,SAAS;AACf,SAAK,UAAU,QAAQ;AACvB,SAAK,gBAAe;AAAA,EACpB;AAAA,EACD,SAAS;AAAA;AAAA,IAER,kBAAkB;AACjB,WAAK,UAAU;AACf,iBAAW,MAAM;AAChB,aAAK,QAAQA,sBAAY,aAAC,aAAa,KAAK,OAAO;AACnD,aAAK,UAAU;AAAA,MACf,GAAE,GAAG;AAAA,IACN;AAAA;AAAA,IAGD,SAAS;AACRC,oBAAG,MAAC,aAAY;AAAA,IAChB;AAAA;AAAA,IAGD,YAAY;AACXA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,6BAA6B,KAAK,OAAO;AAAA,MAC/C,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,cAAc;AACbA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChB,kBAAM,UAAUD,sBAAY,aAAC,YAAY,KAAK,OAAO;AACrD,gBAAI,SAAS;AACZC,4BAAAA,MAAI,UAAU;AAAA,gBACb,OAAO;AAAA,gBACP,MAAM;AAAA,cACP,CAAC;AACD,yBAAW,MAAM;AAChBA,8BAAG,MAAC,aAAY;AAAA,cAChB,GAAE,IAAI;AAAA,mBACD;AACNA,4BAAAA,MAAI,UAAU;AAAA,gBACb,OAAO;AAAA,gBACP,MAAM;AAAA,cACP,CAAC;AAAA,YACF;AAAA,UACD;AAAA,QACD;AAAA,MACD,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,WAAW,YAAY;AACtB,YAAM,OAAO,IAAI,KAAK,UAAU;AAChC,aAAO,KAAK,YAAW,IAAK,OAC1B,KAAK,aAAa,GAAG,SAAU,EAAC,SAAS,GAAG,GAAG,IAAI,MACpD,KAAK,QAAO,EAAG,SAAQ,EAAG,SAAS,GAAG,GAAG,IAAI,MAC7C,KAAK,SAAQ,EAAG,SAAQ,EAAG,SAAS,GAAG,GAAG,IAAI,MAC9C,KAAK,WAAU,EAAG,SAAQ,EAAG,SAAS,GAAG,GAAG;AAAA,IAC7C;AAAA;AAAA,IAGD,YAAY,SAAS;AACpB,UAAI,CAAC,WAAW,QAAQ,SAAS,GAAG;AACnC,eAAO;MACR;AAGA,YAAM,SAAS,QAAQ,IAAI,aAAW;AAAA,QACrC,WAAW,OAAO;AAAA,QAClB,UAAU,OAAO;AAAA,MACjB,EAAC;AAEF,aAAO,CAAC;AAAA,QACP;AAAA,QACA,OAAO;AAAA,QACP,OAAO;AAAA,QACP,WAAW;AAAA,QACX,aAAa;AAAA,QACb,aAAa;AAAA,MACd,CAAC;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5MD,GAAG,WAAW,eAAe;"}