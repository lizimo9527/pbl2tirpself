{"version":3,"file":"edit.js","sources":["pages/guide/edit/edit.vue","../../../Adownloads/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZ3VpZGUvZWRpdC9lZGl0LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"edit-container\">\r\n\t\t<!-- ç¼–è¾‘æ¨¡å¼ -->\r\n\t\t<view v-if=\"!showPreview\">\r\n\t\t\t<!-- é¡¶éƒ¨å¯¼èˆªæ  -->\r\n\t\t\t<view class=\"edit-header\">\r\n\t\t\t\t<view class=\"header-back\" @click=\"goBack\">\r\n\t\t\t\t\t<text class=\"back-icon\">â†</text>\r\n\t\t\t\t\t<text class=\"back-text\">è¿”å›</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"header-title\">{{editMode ? 'ç¼–è¾‘æ”»ç•¥' : 'åˆ›å»ºæ”»ç•¥'}}</view>\r\n\t\t\t\t<view class=\"header-actions\">\r\n\t\t\t\t\t<button class=\"action-btn preview-btn\" @click=\"togglePreview\" v-if=\"content\">\r\n\t\t\t\t\t\t<text class=\"action-icon\">ğŸ‘ï¸</text>\r\n\t\t\t\t\t\t<text class=\"action-text\">é¢„è§ˆ</text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class=\"action-btn save-btn\" @click=\"saveDraft\">\r\n\t\t\t\t\t\t<text class=\"action-icon\">ğŸ’¾</text>\r\n\t\t\t\t\t\t<text class=\"action-text\">ä¿å­˜è‰ç¨¿</text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class=\"action-btn publish-btn\" @click=\"publishGuide\">\r\n\t\t\t\t\t\t<text class=\"action-icon\">ğŸš€</text>\r\n\t\t\t\t\t\t<text class=\"action-text\">å‘å¸ƒ</text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<scroll-view class=\"edit-content\" scroll-y>\r\n\t\t\t\t<!-- å°é¢å›¾ç‰‡ä¸Šä¼  -->\r\n\t\t\t\t<view class=\"cover-section\">\r\n\t\t\t\t\t<view class=\"cover-upload\">\r\n\t\t\t\t\t\t<view class=\"cover-placeholder\" v-if=\"!imagePath\" @click=\"chooseImage\">\r\n\t\t\t\t\t\t\t<text class=\"placeholder-icon\">ğŸï¸</text>\r\n\t\t\t\t\t\t\t<text class=\"placeholder-text\">ç‚¹å‡»ä¸Šä¼ å°é¢å›¾ç‰‡</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"cover-preview\" v-else>\r\n\t\t\t\t\t\t\t<image :src=\"imagePath\" mode=\"aspectFill\" class=\"cover-image\" />\r\n\t\t\t\t\t\t\t<view class=\"cover-overlay\">\r\n\t\t\t\t\t\t\t\t<button class=\"cover-change-btn\" @click=\"chooseImage\">æ›´æ¢å›¾ç‰‡</button>\r\n\t\t\t\t\t\t\t\t<button class=\"cover-remove-btn\" @click=\"removeImage\">åˆ é™¤</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- åŸºæœ¬ä¿¡æ¯è¡¨å• -->\r\n\t\t\t\t<view class=\"form-section\">\r\n\t\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t\t<text class=\"form-label\">æ”»ç•¥æ ‡é¢˜</text>\r\n\t\t\t\t\t\t<input class=\"form-input\" placeholder=\"è¯·è¾“å…¥æ”»ç•¥æ ‡é¢˜ï¼ˆå¿…å¡«ï¼‰\" @input=\"onTitleInput\" :value=\"title\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"form-item\">\r\n\t\t\t\t\t\t<text class=\"form-label\">ç›®çš„åœ°</text>\r\n\t\t\t\t\t\t<input class=\"form-input\" placeholder=\"è¯·è¾“å…¥ç›®çš„åœ°ï¼ˆå¿…å¡«ï¼‰\" @input=\"onDestinationInput\" :value=\"destination\" />\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- åœ°å›¾å®šä½æ¨¡å— -->\r\n\t\t\t\t\t<view class=\"map-section\">\r\n\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t<text class=\"section-title\">åœ°å›¾å®šä½</text>\r\n\t\t\t\t\t\t\t<view class=\"map-controls\">\r\n\t\t\t\t\t\t\t\t<button class=\"map-control-btn\" @click=\"locateOnMap\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"map-btn-icon\">ğŸ“</text>\r\n\t\t\t\t\t\t\t\t\t<text>å®šä½</text>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button class=\"map-control-btn\" @click=\"searchOnMap\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"map-btn-icon\">ğŸ”</text>\r\n\t\t\t\t\t\t\t\t\t<text>æœç´¢</text>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button class=\"map-control-btn clear-btn\" @click=\"clearMarkers\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"map-btn-icon\">ğŸ—‘ï¸</text>\r\n\t\t\t\t\t\t\t\t\t<text>æ¸…é™¤</text>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"map-container\">\r\n\t\t\t\t\t\t\t<map \r\n\t\t\t\t\t\t\t\tid=\"editMap\"\r\n\t\t\t\t\t\t\t\t:longitude=\"mapCenter.longitude\"\r\n\t\t\t\t\t\t\t\t:latitude=\"mapCenter.latitude\"\r\n\t\t\t\t\t\t\t\t:scale=\"mapScale\"\r\n\t\t\t\t\t\t\t\t:markers=\"markers\"\r\n\t\t\t\t\t\t\t\t:polyline=\"polyline\"\r\n\t\t\t\t\t\t\t\t:show-location=\"true\"\r\n\t\t\t\t\t\t\t\t:enable-zoom=\"true\"\r\n\t\t\t\t\t\t\t\t:enable-scroll=\"true\"\r\n\t\t\t\t\t\t\t\tclass=\"tencent-map\"\r\n\t\t\t\t\t\t\t\t@tap=\"onMapTap\"\r\n\t\t\t\t\t\t\t\t@markertap=\"onMarkerTap\"\r\n\t\t\t\t\t\t\t></map>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<!-- åœ°å›¾åŠ è½½çŠ¶æ€ -->\r\n\t\t\t\t\t\t\t<view class=\"map-loading\" v-if=\"isMapLoading\">\r\n\t\t\t\t\t\t\t\t<text class=\"loading-icon\">â³</text>\r\n\t\t\t\t\t\t\t\t<text class=\"loading-text\">åœ°å›¾åŠ è½½ä¸­...</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<!-- åæ ‡ä¿¡æ¯æ˜¾ç¤º -->\r\n\t\t\t\t\t\t\t<view class=\"map-coordinates\" v-if=\"selectedLocation\">\r\n\t\t\t\t\t\t\t\t<text class=\"coordinate-text\">ğŸ“ {{selectedLocation.address || 'è‡ªå®šä¹‰ä½ç½®'}}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"coordinate-text\">ç»åº¦: {{selectedLocation.longitude.toFixed(6)}} çº¬åº¦: {{selectedLocation.latitude.toFixed(6)}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- æ”»ç•¥å†…å®¹ -->\r\n\t\t\t\t\t<view class=\"content-section\">\r\n\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t<text class=\"section-title\">æ”»ç•¥å†…å®¹</text>\r\n\t\t\t\t\t\t\t<button class=\"ai-generate-btn\" @click=\"generateWithAI\" :disabled=\"isGenerating\">\r\n\t\t\t\t\t\t\t\t<text class=\"ai-icon\">ğŸ¤–</text>\r\n\t\t\t\t\t\t\t\t<text class=\"ai-text\">{{isGenerating ? 'ç”Ÿæˆä¸­...' : 'AIç”Ÿæˆ'}}</text>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<textarea class=\"content-textarea\" placeholder=\"è¯·è¾“å…¥è¯¦ç»†çš„æ”»ç•¥å†…å®¹...ï¼ˆå¿…å¡«ï¼‰\" @input=\"onContentInput\" :value=\"content\" maxlength=\"2000\" />\r\n\t\t\t\t\t\t<view class=\"word-count\">{{content.length}}/2000</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- æ ‡ç­¾ç®¡ç† -->\r\n\t\t\t\t\t<view class=\"tags-section\">\r\n\t\t\t\t\t\t<text class=\"section-title\">æ ‡ç­¾</text>\r\n\t\t\t\t\t\t<view class=\"tags-input-container\">\r\n\t\t\t\t\t\t\t<input class=\"tags-input\" placeholder=\"è¾“å…¥æ ‡ç­¾åæŒ‰å›è½¦æ·»åŠ \" @input=\"onTagInput\" :value=\"tagInput\" @confirm=\"addTag\" />\r\n\t\t\t\t\t\t\t<text class=\"tags-hint\">æœ€å¤šå¯æ·»åŠ 5ä¸ªæ ‡ç­¾</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"tags-list\">\r\n\t\t\t\t\t\t\t<view class=\"tag-item\" v-for=\"(tag, index) in tags\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<text class=\"tag-text\">{{tag}}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"tag-remove\" @click=\"removeTag(index)\">Ã—</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\r\n\t\t<!-- é¢„è§ˆæ¨¡å¼ -->\r\n\t\t<view v-else class=\"template-detail-container\">\r\n\t\t\t<!-- é¡¶éƒ¨å¯¼èˆªæ  -->\r\n\t\t\t<view class=\"detail-header\">\r\n\t\t\t\t<!-- ç¬¬ä¸€è¡Œï¼šè¿”å›æŒ‰é’®å’Œæ ‡é¢˜ -->\r\n\t\t\t\t<view class=\"header-top-row\">\r\n\t\t\t\t\t<view class=\"header-back\" @click=\"togglePreview\">\r\n\t\t\t\t\t\t<text class=\"back-icon\">â†</text>\r\n\t\t\t\t\t\t<text class=\"back-text\">è¿”å›ç¼–è¾‘</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"header-title\">{{title || 'æœªå‘½åæ”»ç•¥'}}</view>\r\n\t\t\t\t\t<view style=\"width: 120rpx;\"></view> <!-- å ä½ï¼Œä¿æŒå¹³è¡¡ -->\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- ç¬¬äºŒè¡Œï¼šæŒ‰é’® -->\r\n\t\t\t\t<view class=\"header-actions\">\r\n\t\t\t\t\t<button class=\"action-btn save-btn\" @click=\"saveDraft\">\r\n\t\t\t\t\t\t<text class=\"action-icon\">ğŸ’¾</text>\r\n\t\t\t\t\t\t<text class=\"action-text\">ä¿å­˜è‰ç¨¿</text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button class=\"action-btn publish-btn\" @click=\"publishGuide\">\r\n\t\t\t\t\t\t<text class=\"action-icon\">ğŸš€</text>\r\n\t\t\t\t\t\t<text class=\"action-text\">å‘å¸ƒ</text>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<scroll-view class=\"detail-content\" scroll-y>\r\n\t\t\t\t<!-- æ—…è¡Œæ”»ç•¥å¡ç‰‡ -->\r\n\t\t\t\t<view class=\"travel-guide-card\">\r\n\t\t\t\t\t<!-- èƒŒæ™¯å›¾åŒºåŸŸ -->\r\n\t\t\t\t\t<view class=\"banner-section\">\r\n\t\t\t\t\t\t<image :src=\"imagePath || '/static/images/default-cover.jpg'\" mode=\"aspectFill\" class=\"banner-image\" />\r\n\t\t\t\t\t\t<view class=\"banner-overlay\"></view>\r\n\t\t\t\t\t\t<view class=\"banner-content\">\r\n\t\t\t\t\t\t\t<text class=\"guide-title\">{{title || 'æœªå‘½åæ”»ç•¥'}}</text>\r\n\t\t\t\t\t\t\t<text class=\"guide-subtitle\">{{destination ? `æ¢ç´¢${destination}çš„ç²¾å½©æ—…ç¨‹` : 'åˆ›å»ºæ‚¨çš„ä¸“å±æ—…è¡Œæ”»ç•¥'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- æŒ‰å¤©è¡Œç¨‹å±•ç¤º -->\r\n\t\t\t\t\t<view class=\"days-section\">\r\n\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t<text class=\"section-title\">è¡Œç¨‹å®‰æ’</text>\r\n\t\t\t\t\t\t\t<view class=\"days-actions\" v-if=\"days && days.length > 0\">\r\n\t\t\t\t\t\t\t\t<button class=\"action-btn batch-coordinates-btn\" @click=\"batchAddCoordinates\" v-if=\"days.some(day => day.attractions && day.attractions.some(attraction => !attraction.coordinates))\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"action-icon\">ğŸ“</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"action-text\">æ‰¹é‡æ·»åŠ åæ ‡</text>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button class=\"action-btn refresh-map-btn\" @click=\"generateMapMarkersFromDays\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"action-icon\">ğŸ”„</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"action-text\">åˆ·æ–°åœ°å›¾</text>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"days-container\" v-if=\"days && days.length > 0\">\r\n\t\t\t\t\t\t\t<view class=\"day-item\" v-for=\"day in days\" :key=\"day.day\">\r\n\t\t\t\t\t\t\t\t<view class=\"day-header\" @click=\"toggleDay(day.day)\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"day-badge\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"day-number\">ç¬¬{{day.day}}å¤©</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<text class=\"day-title\">{{day.title}}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"day-expand-icon\">{{day.expanded ? 'â–¼' : 'â–¶'}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"day-content\" v-if=\"day.expanded\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"attractions-list\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"attraction-item\" v-for=\"(attraction, index) in day.attractions\" :key=\"attraction.id\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"attraction-header\" @click=\"toggleAttraction(attraction.id)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"attraction-order\">{{index + 1}}</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"attraction-name\">{{attraction.name}}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"attraction-expand-icon\">{{attraction.expanded ? 'â–¼' : 'â–¶'}}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"attraction-details\" :class=\"{'expanded': attraction.expanded}\" v-if=\"attraction.expanded\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"attraction-description\">{{attraction.description}}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"attraction-meta\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"attraction-duration\">â±ï¸ {{attraction.duration}}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"coordinates-status\" :class=\"{ 'has-coordinates': attraction.coordinates, 'no-coordinates': !attraction.coordinates }\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{attraction.coordinates ? 'ğŸ“ å·²æ·»åŠ åæ ‡' : 'âŒ æœªæ·»åŠ åæ ‡'}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"transportation-preview\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"transportation-title\">ğŸš— äº¤é€šæ–¹å¼ï¼š</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"transportation-options\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"attraction.transportation && attraction.transportation.subway\" class=\"transportation-option\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tğŸš‡ åœ°é“ï¼š{{attraction.transportation.subway.time}}ï¼Œè´¹ç”¨{{attraction.transportation.subway.cost}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"attraction.transportation && attraction.transportation.taxi\" class=\"transportation-option\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tğŸš• å‡ºç§Ÿè½¦ï¼š{{attraction.transportation.taxi.time}}ï¼Œè´¹ç”¨{{attraction.transportation.taxi.cost}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"!attraction.transportation || (!attraction.transportation.subway && !attraction.transportation.taxi)\" class=\"transportation-option\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tæš‚æ— äº¤é€šä¿¡æ¯\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-else class=\"no-data-tips\">\r\n\t\t\t\t\t\t\t<text class=\"no-data-icon\">ğŸ“</text>\r\n\t\t\t\t\t\t\t<text class=\"no-data-text\">æš‚æ— è¡Œç¨‹å®‰æ’ï¼Œè¯·å…ˆç¼–è¾‘æ”»ç•¥å†…å®¹</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- æ”»ç•¥å†…å®¹ -->\r\n\t\t\t\t\t<view class=\"content-section\">\r\n\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t<text class=\"section-title\">æ”»ç•¥å†…å®¹</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"content-text\">{{content || 'æš‚æ— å†…å®¹ï¼Œè¯·æ·»åŠ è¯¦ç»†çš„æ”»ç•¥å†…å®¹...'}}</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- æ ‡ç­¾åŒºåŸŸ -->\r\n\t\t\t\t\t<view class=\"tags-section\" v-if=\"tags.length > 0\">\r\n\t\t\t\t\t\t<text class=\"section-title\">æ ‡ç­¾</text>\r\n\t\t\t\t\t\t<view class=\"tags-list\">\r\n\t\t\t\t\t\t\t<view class=\"tag-item\" v-for=\"(tag, index) in tags\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<text class=\"tag-text\">{{tag}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- æ—…è¡Œå°è´´å£« -->\r\n\t\t\t\t\t<view class=\"tips-section\">\r\n\t\t\t\t\t\t<text class=\"tips-title\">æ—…è¡Œå°è´´å£«</text>\r\n\t\t\t\t\t\t<view class=\"tips-list\">\r\n\t\t\t\t\t\t\t<view class=\"tip-item\">\r\n\t\t\t\t\t\t\t\t<text class=\"tip-icon\">â„¹ï¸</text>\r\n\t\t\t\t\t\t\t\t<text class=\"tip-text\">å»ºè®®æå‰è§„åˆ’è¡Œç¨‹ï¼Œåˆç†å®‰æ’æ—¶é—´</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"tip-item\">\r\n\t\t\t\t\t\t\t\t<text class=\"tip-icon\">ğŸ“</text>\r\n\t\t\t\t\t\t\t\t<text class=\"tip-text\">æºå¸¦å¿…è¦çš„æ—…è¡Œç”¨å“å’Œè¯å“</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"tip-item\">\r\n\t\t\t\t\t\t\t\t<text class=\"tip-icon\">â˜€ï¸</text>\r\n\t\t\t\t\t\t\t\t<text class=\"tip-text\">æ ¹æ®å¤©æ°”æƒ…å†µå‡†å¤‡åˆé€‚çš„è¡£ç‰©</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"tip-item\">\r\n\t\t\t\t\t\t\t\t<text class=\"tip-icon\">ğŸ½ï¸</text>\r\n\t\t\t\t\t\t\t\t<text class=\"tip-text\">å“å°å½“åœ°ç‰¹è‰²ç¾é£Ÿï¼Œä½“éªŒåœ°é“æ–‡åŒ–</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- è¡Œç¨‹åœ°å›¾ -->\r\n\t\t\t\t\t<view class=\"map-section\">\r\n\t\t\t\t\t\t<view class=\"section-header\">\r\n\t\t\t\t\t\t\t<text class=\"section-title\">è¡Œç¨‹åœ°å›¾</text>\r\n\t\t\t\t\t\t\t<button class=\"map-control-btn\" @click=\"showMapModal = true\">\r\n\t\t\t\t\t\t\t\t<text class=\"map-btn-icon\">ğŸ—ºï¸</text>\r\n\t\t\t\t\t\t\t\t<text>æŸ¥çœ‹å¤§å›¾</text>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"map-container\">\r\n\t\t\t\t\t\t\t<map \r\n\t\t\t\t\t\t\t\tid=\"previewMap\"\r\n\t\t\t\t\t\t\t\t:longitude=\"mapCenter.longitude\"\r\n\t\t\t\t\t\t\t\t:latitude=\"mapCenter.latitude\"\r\n\t\t\t\t\t\t\t\t:scale=\"mapScale\"\r\n\t\t\t\t\t\t\t\t:markers=\"markers\"\r\n\t\t\t\t\t\t\t\t:polyline=\"polyline\"\r\n\t\t\t\t\t\t\t\t:show-location=\"true\"\r\n\t\t\t\t\t\t\t\tclass=\"tencent-map\"\r\n\t\t\t\t\t\t\t></map>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\r\n\t\t<!-- åœ°å›¾å¼¹çª— -->\r\n\t\t<view class=\"map-modal\" v-if=\"showMapModal\">\r\n\t\t\t<view class=\"modal-overlay\" @click=\"showMapModal = false\"></view>\r\n\t\t\t<view class=\"modal-content\">\r\n\t\t\t\t<view class=\"modal-header\">\r\n\t\t\t\t\t<text class=\"modal-title\">{{title || 'æ”»ç•¥'}} - è¡Œç¨‹åœ°å›¾</text>\r\n\t\t\t\t\t<view class=\"modal-close\" @click=\"showMapModal = false\">\r\n\t\t\t\t\t\t<text>Ã—</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"map-container\">\r\n\t\t\t\t\t<map \r\n\t\t\t\t\t\t:longitude=\"mapCenter.longitude\"\r\n\t\t\t\t\t\t:latitude=\"mapCenter.latitude\"\r\n\t\t\t\t\t\t:scale=\"mapScale\"\r\n\t\t\t\t\t\t:markers=\"markers\"\r\n\t\t\t\t\t\t:polyline=\"polyline\"\r\n\t\t\t\t\t\t:show-location=\"true\"\r\n\t\t\t\t\t\tclass=\"detail-map\"\r\n\t\t\t\t\t></map>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- äº¤é€šæ–¹å¼å¼¹çª— -->\r\n\t\t<view class=\"transportation-modal\" v-if=\"showTransportationModal\">\r\n\t\t\t<view class=\"modal-overlay\" @click=\"showTransportationModal = false\"></view>\r\n\t\t\t<view class=\"modal-content\">\r\n\t\t\t\t<view class=\"modal-header\">\r\n\t\t\t\t\t<text class=\"modal-title\">{{currentAttraction?.name}} - äº¤é€šæ–¹å¼</text>\r\n\t\t\t\t\t<view class=\"modal-close\" @click=\"showTransportationModal = false\">\r\n\t\t\t\t\t\t<text>Ã—</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"transportation-options\">\r\n\t\t\t\t\t<view class=\"transportation-item subway\">\r\n\t\t\t\t\t\t<text class=\"transportation-icon\">ğŸš‡</text>\r\n\t\t\t\t\t\t<view class=\"transportation-info\">\r\n\t\t\t\t\t\t\t<text class=\"transportation-title\">åœ°é“</text>\r\n\t\t\t\t\t\t\t<text class=\"transportation-details\">é¢„è®¡æ—¶é—´ï¼š{{currentAttraction?.transportation?.subway?.time}}</text>\r\n\t\t\t\t\t\t\t<text class=\"transportation-details\">é¢„è®¡è´¹ç”¨ï¼š{{currentAttraction?.transportation?.subway?.cost}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"transportation-item taxi\">\r\n\t\t\t\t\t\t<text class=\"transportation-icon\">ğŸš•</text>\r\n\t\t\t\t\t\t<view class=\"transportation-info\">\r\n\t\t\t\t\t\t\t<text class=\"transportation-title\">å‡ºç§Ÿè½¦</text>\r\n\t\t\t\t\t\t\t<text class=\"transportation-details\">é¢„è®¡æ—¶é—´ï¼š{{currentAttraction?.transportation?.taxi?.time}}</text>\r\n\t\t\t\t\t\t\t<text class=\"transportation-details\">é¢„è®¡è´¹ç”¨ï¼š{{currentAttraction?.transportation?.taxi?.cost}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { mapConfig, mapUtils } from '@/config/map.config.js'\r\n\timport guideService from '@/services/guideService.js'\r\n\timport aiService from '@/services/aiService.js'\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tdestination: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\timagePath: '',\r\n\t\t\t\ttagInput: '',\r\n\t\t\t\ttags: [],\r\n\t\t\t\t\r\n\t\t\t\t// ç¼–è¾‘æ¨¡å¼ç›¸å…³\r\n\t\t\t\teditMode: false,\r\n\t\t\t\tguideId: '',\r\n\t\t\t\t\r\n\t\t\t\t// åœ°å›¾ç›¸å…³æ•°æ®\r\n\t\t\t\tmapCenter: {\r\n\t\t\t\t\tlongitude: mapConfig.defaultCenter.longitude,\r\n\t\t\t\t\tlatitude: mapConfig.defaultCenter.latitude\r\n\t\t\t\t},\r\n\t\t\t\tmapScale: mapConfig.zoomLevel,\r\n\t\t\t\tmarkers: [],\r\n\t\t\t\tselectedLocation: null,\r\n\t\t\t\tisMapLoading: false,\r\n\t\t\t\t\r\n\t\t\t\t// æŠ˜çº¿ç›¸å…³æ•°æ®\r\n\t\t\t\tpolyline: [],\r\n\t\t\t\t\r\n\t\t\t\t// é¢„è§ˆæ¨¡å¼ç›¸å…³\r\n\t\t\t\tshowPreview: false,\r\n\t\t\t\tshowMapModal: false,\r\n\t\t\t\tshowTransportationModal: false,\r\n\t\t\t\t\r\n\t\t\t\t// ç”¨æˆ·ä¿¡æ¯\r\n\t\t\t\tuserInfo: {\r\n\t\t\t\t\tnickName: 'æ¸¸å®¢'\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t// è¡Œç¨‹æ•°æ®\r\n\t\t\t\tdays: [],\r\n\t\t\t\tcurrentAttraction: null,\r\n\t\t\t\t\r\n\t\t\t\t// AIç”ŸæˆçŠ¶æ€\r\n\t\t\t\tisGenerating: false\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tonLoad(options) {\r\n\t\t\tif (options.id) {\r\n\t\t\t\tthis.editMode = true\r\n\t\t\t\tthis.guideId = options.id\r\n\t\t\t\tthis.loadGuideData()\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// åˆå§‹åŒ–åœ°å›¾æ•°æ®\r\n\t\t\tthis.initMapData()\r\n\t\t},\r\n\t\t\r\n\t\tmethods: {\r\n\t\t\t// åˆå§‹åŒ–åœ°å›¾æ•°æ®\r\n\t\t\tinitMapData() {\r\n\t\t\t\t// åˆå§‹åŒ–åœ°å›¾æ ‡è®°å’ŒæŠ˜çº¿\r\n\t\t\t\tthis.markers = []\r\n\t\t\t\tthis.polyline = []\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// åŠ è½½æ”»ç•¥æ•°æ®\r\n\t\t\tasync loadGuideData() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst guideData = await guideService.getGuideById(this.guideId)\r\n\t\t\t\t\tthis.title = guideData.title\r\n\t\t\t\t\tthis.destination = guideData.destination\r\n\t\t\t\t\tthis.content = guideData.content\r\n\t\t\t\t\tthis.imagePath = guideData.imagePath\r\n\t\t\t\t\tthis.tags = guideData.tags || []\r\n\t\t\t\t\tthis.days = guideData.days || []\r\n\t\t\t\t\t\r\n\t\t\t\t\t// æ›´æ–°åœ°å›¾æ ‡è®°\r\n\t\t\t\t\tthis.generateMapMarkersFromDays()\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('åŠ è½½æ”»ç•¥æ•°æ®å¤±è´¥:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'åŠ è½½å¤±è´¥',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// æ ‡é¢˜è¾“å…¥\r\n\t\t\tonTitleInput(e) {\r\n\t\t\t\tthis.title = e.detail.value\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ç›®çš„åœ°è¾“å…¥\r\n\t\t\tonDestinationInput(e) {\r\n\t\t\t\tthis.destination = e.detail.value\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// å†…å®¹è¾“å…¥\r\n\t\t\tonContentInput(e) {\r\n\t\t\t\tthis.content = e.detail.value\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// æ ‡ç­¾è¾“å…¥\r\n\t\t\tonTagInput(e) {\r\n\t\t\t\tthis.tagInput = e.detail.value\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// æ·»åŠ æ ‡ç­¾\r\n\t\t\taddTag() {\r\n\t\t\t\tif (this.tagInput.trim() && this.tags.length < 5) {\r\n\t\t\t\t\tthis.tags.push(this.tagInput.trim())\r\n\t\t\t\t\tthis.tagInput = ''\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ç§»é™¤æ ‡ç­¾\r\n\t\t\tremoveTag(index) {\r\n\t\t\t\tthis.tags.splice(index, 1)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// é€‰æ‹©å›¾ç‰‡\r\n\t\t\tchooseImage() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsizeType: ['compressed'],\r\n\t\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.imagePath = res.tempFilePaths[0]\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ç§»é™¤å›¾ç‰‡\r\n\t\t\tremoveImage() {\r\n\t\t\t\tthis.imagePath = ''\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// åœ°å›¾ç‚¹å‡»\r\n\t\t\tonMapTap(e) {\r\n\t\t\t\tconst { latitude, longitude } = e.detail\r\n\t\t\t\tthis.selectedLocation = {\r\n\t\t\t\t\tlatitude,\r\n\t\t\t\t\tlongitude\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// æ·»åŠ æ ‡è®°\r\n\t\t\t\tthis.addMarker(latitude, longitude)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// æ ‡è®°ç‚¹å‡»\r\n\t\t\tonMarkerTap(e) {\r\n\t\t\t\tconst markerId = e.detail.markerId\r\n\t\t\t\tconst marker = this.markers.find(m => m.id === markerId)\r\n\t\t\t\tif (marker) {\r\n\t\t\t\t\tthis.selectedLocation = {\r\n\t\t\t\t\t\tlatitude: marker.latitude,\r\n\t\t\t\t\t\tlongitude: marker.longitude\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// æ·»åŠ æ ‡è®°\r\n\t\t\taddMarker(latitude, longitude) {\r\n\t\t\t\tconst markerId = this.markers.length + 1\r\n\t\t\t\tthis.markers.push({\r\n\t\t\t\t\tid: markerId,\r\n\t\t\t\t\tlatitude,\r\n\t\t\t\t\tlongitude,\r\n\t\t\t\t\ticonPath: '/static/images/marker.png',\r\n\t\t\t\t\twidth: 30,\r\n\t\t\t\t\theight: 30\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t// æ›´æ–°æŠ˜çº¿\r\n\t\t\t\tthis.updatePolyline()\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// æ›´æ–°æŠ˜çº¿\r\n\t\t\tupdatePolyline() {\r\n\t\t\t\tif (this.markers.length > 1) {\r\n\t\t\t\t\tthis.polyline = [{\r\n\t\t\t\t\t\tpoints: this.markers.map(marker => ({\r\n\t\t\t\t\t\t\tlatitude: marker.latitude,\r\n\t\t\t\t\t\t\tlongitude: marker.longitude\r\n\t\t\t\t\t\t})),\r\n\t\t\t\t\t\tcolor: '#1A9E8F',\r\n\t\t\t\t\t\twidth: 4,\r\n\t\t\t\t\t\tdottedLine: false\r\n\t\t\t\t\t}]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.polyline = []\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// æ¸…é™¤æ ‡è®°\r\n\t\t\tclearMarkers() {\r\n\t\t\t\tthis.markers = []\r\n\t\t\t\tthis.polyline = []\r\n\t\t\t\tthis.selectedLocation = null\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// åœ°å›¾å®šä½\r\n\t\t\tlocateOnMap() {\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype: 'gcj02',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.mapCenter.latitude = res.latitude\r\n\t\t\t\t\t\tthis.mapCenter.longitude = res.longitude\r\n\t\t\t\t\t\tthis.addMarker(res.latitude, res.longitude)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// åœ°å›¾æœç´¢\r\n\t\t\tsearchOnMap() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: 'æœç´¢åŠŸèƒ½å¼€å‘ä¸­',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// AIç”Ÿæˆæ”»ç•¥\r\n\t\t\tasync generateWithAI() {\r\n\t\t\t\tif (!this.destination) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'è¯·å…ˆå¡«å†™ç›®çš„åœ°',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.isGenerating = true\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst result = await aiService.generateGuide({\r\n\t\t\t\t\t\tdestination: this.destination,\r\n\t\t\t\t\t\tdays: 3\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.content = result.content\r\n\t\t\t\t\tthis.days = result.days || []\r\n\t\t\t\t\t\r\n\t\t\t\t\t// æ›´æ–°åœ°å›¾æ ‡è®°\r\n\t\t\t\t\tthis.generateMapMarkersFromDays()\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'AIç”ŸæˆæˆåŠŸ',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('AIç”Ÿæˆå¤±è´¥:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.isGenerating = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// æ ¹æ®å¤©æ•°ç”Ÿæˆåœ°å›¾æ ‡è®°\r\n\t\t\tgenerateMapMarkersFromDays() {\r\n\t\t\t\tthis.markers = []\r\n\t\t\t\t\r\n\t\t\t\tif (this.days && this.days.length > 0) {\r\n\t\t\t\t\tthis.days.forEach(day => {\r\n\t\t\t\t\t\tif (day.attractions && day.attractions.length > 0) {\r\n\t\t\t\t\t\t\tday.attractions.forEach((attraction, index) => {\r\n\t\t\t\t\t\t\t\tif (attraction.coordinates) {\r\n\t\t\t\t\t\t\t\t\tthis.markers.push({\r\n\t\t\t\t\t\t\t\t\t\tid: attraction.id || `${day.day}-${index}`,\r\n\t\t\t\t\t\t\t\t\t\tlatitude: attraction.coordinates.latitude,\r\n\t\t\t\t\t\t\t\t\t\tlongitude: attraction.coordinates.longitude,\r\n\t\t\t\t\t\t\t\t\t\ttitle: attraction.name,\r\n\t\t\t\t\t\t\t\t\t\ticonPath: '/static/images/marker.png',\r\n\t\t\t\t\t\t\t\t\t\twidth: 30,\r\n\t\t\t\t\t\t\t\t\t\theight: 30\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t// æ›´æ–°æŠ˜çº¿\r\n\t\t\t\t\tthis.updatePolyline()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// æ‰¹é‡æ·»åŠ åæ ‡\r\n\t\t\tbatchAddCoordinates() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: 'æ‰¹é‡æ·»åŠ åæ ‡åŠŸèƒ½å¼€å‘ä¸­',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// åˆ‡æ¢å¤©æ•°å±•å¼€çŠ¶æ€\r\n\t\t\ttoggleDay(dayNumber) {\r\n\t\t\t\tconst day = this.days.find(d => d.day === dayNumber)\r\n\t\t\t\tif (day) {\r\n\t\t\t\t\tday.expanded = !day.expanded\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// åˆ‡æ¢æ™¯ç‚¹å±•å¼€çŠ¶æ€\r\n\t\t\ttoggleAttraction(attractionId) {\r\n\t\t\t\tfor (const day of this.days) {\r\n\t\t\t\t\tif (day.attractions) {\r\n\t\t\t\t\t\tconst attraction = day.attractions.find(a => a.id === attractionId)\r\n\t\t\t\t\t\tif (attraction) {\r\n\t\t\t\t\t\t\tattraction.expanded = !attraction.expanded\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// åˆ‡æ¢é¢„è§ˆæ¨¡å¼\r\n\t\t\ttogglePreview() {\r\n\t\t\t\tthis.showPreview = !this.showPreview\r\n\t\t\t\tif (this.showPreview) {\r\n\t\t\t\t\t// æ›´æ–°åœ°å›¾æ ‡è®°\r\n\t\t\t\t\tthis.generateMapMarkersFromDays()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ä¿å­˜è‰ç¨¿\r\n\t\t\tasync saveDraft() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst guideData = {\r\n\t\t\t\t\t\ttitle: this.title,\r\n\t\t\t\t\t\tdestination: this.destination,\r\n\t\t\t\t\t\tcontent: this.content,\r\n\t\t\t\t\t\timagePath: this.imagePath,\r\n\t\t\t\t\t\ttags: this.tags,\r\n\t\t\t\t\t\tdays: this.days\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (this.editMode) {\r\n\t\t\t\t\t\tawait guideService.updateGuide(this.guideId, guideData)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait guideService.createGuide(guideData)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'ä¿å­˜æˆåŠŸ',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('ä¿å­˜è‰ç¨¿å¤±è´¥:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'ä¿å­˜å¤±è´¥',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// å‘å¸ƒæ”»ç•¥\r\n\t\t\tasync publishGuide() {\r\n\t\t\t\tif (!this.validateForm()) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst guideData = {\r\n\t\t\t\t\t\ttitle: this.title,\r\n\t\t\t\t\t\tdestination: this.destination,\r\n\t\t\t\t\t\tcontent: this.content,\r\n\t\t\t\t\t\timagePath: this.imagePath,\r\n\t\t\t\t\t\ttags: this.tags,\r\n\t\t\t\t\t\tdays: this.days,\r\n\t\t\t\t\t\tpublished: true\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (this.editMode) {\r\n\t\t\t\t\t\tawait guideService.updateGuide(this.guideId, guideData)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst result = await guideService.createGuide(guideData)\r\n\t\t\t\t\t\tthis.guideId = result.id\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'å‘å¸ƒæˆåŠŸ',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t// è¿”å›ä¸Šä¸€é¡µ\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\t}, 1500)\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('å‘å¸ƒæ”»ç•¥å¤±è´¥:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'å‘å¸ƒå¤±è´¥',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// è¡¨å•éªŒè¯\r\n\t\t\tvalidateForm() {\r\n\t\t\t\tif (!this.title.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'è¯·å¡«å†™æ”»ç•¥æ ‡é¢˜',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!this.destination.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'è¯·å¡«å†™ç›®çš„åœ°',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!this.content.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'è¯·å¡«å†™æ”»ç•¥å†…å®¹',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn true\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// è¿”å›ä¸Šä¸€é¡µ\r\n\t\t\tgoBack() {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.edit-container {\r\n\t\tmin-height: 100vh;\r\n\t\tbackground: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\r\n\t\tfont-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n\t}\r\n\t\r\n\t/* ç¼–è¾‘æ¨¡å¼æ ·å¼ */\r\n\t.edit-header {\r\n\t\theight: 120rpx;\r\n\t\tbackground: white;\r\n\t\tborder-bottom: 1rpx solid #e5e7eb;\r\n\t\tpadding: 0 30rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tposition: sticky;\r\n\t\ttop: 0;\r\n\t\tz-index: 100;\r\n\t}\r\n\t\r\n\t.header-back {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 10rpx;\r\n\t\tcolor: #374151;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\t\r\n\t.back-icon {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.header-title {\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #1f2937;\r\n\t}\r\n\t\r\n\t.header-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 20rpx;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.action-btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\tpadding: 12rpx 24rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 500;\r\n\t\tborder: none;\r\n\t\tbackground: transparent;\r\n\t}\r\n\t\r\n\t.preview-btn {\r\n\t\tbackground: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);\r\n\t\tcolor: white;\r\n\t}\r\n\t\r\n\t.save-btn {\r\n\t\tbackground: linear-gradient(135deg, #10b981 0%, #059669 100%);\r\n\t\tcolor: white;\r\n\t}\r\n\t\r\n\t.publish-btn {\r\n\t\tbackground: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\r\n\t\tcolor: white;\r\n\t}\r\n\t\r\n\t.action-icon {\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\t\r\n\t.edit-content {\r\n\t\theight: calc(100vh - 120rpx);\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\t\r\n\t.cover-section {\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t\r\n\t.cover-upload {\r\n\t\twidth: 100%;\r\n\t\theight: 300rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\tborder: 2rpx dashed #d1d5db;\r\n\t\tbackground: white;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\t\r\n\t.cover-upload:active {\r\n\t\tbackground: #f9fafb;\r\n\t\tborder-color: #3b82f6;\r\n\t}\r\n\t\r\n\t.cover-placeholder {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 20rpx;\r\n\t\tcolor: #6b7280;\r\n\t}\r\n\t\r\n\t.placeholder-icon {\r\n\t\tfont-size: 64rpx;\r\n\t}\r\n\t\r\n\t.placeholder-text {\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\t\r\n\t.cover-preview {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 16rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.cover-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t\r\n\t.cover-overlay {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbackground: rgba(0, 0, 0, 0.6);\r\n\t\tpadding: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tgap: 20rpx;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.cover-change-btn,\r\n\t.cover-remove-btn {\r\n\t\tpadding: 12rpx 24rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: white;\r\n\t\tborder: 1rpx solid rgba(255, 255, 255, 0.3);\r\n\t\tbackground: rgba(255, 255, 255, 0.1);\r\n\t}\r\n\t\r\n\t.cover-change-btn:active,\r\n\t.cover-remove-btn:active {\r\n\t\tbackground: rgba(255, 255, 255, 0.2);\r\n\t}\r\n\t\r\n\t.form-section {\r\n\t\tbackground: white;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t\r\n\t.form-item {\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t\r\n\t.form-label {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #374151;\r\n\t\tmargin-bottom: 15rpx;\r\n\t}\r\n\t\r\n\t.form-input {\r\n\t\twidth: 100%;\r\n\t\tpadding: 20rpx;\r\n\t\tborder: 1rpx solid #d1d5db;\r\n\t\tborder-radius: 8rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tbackground: #f9fafb;\r\n\t}\r\n\t\r\n\t.form-input:focus {\r\n\t\toutline: none;\r\n\t\tborder-color: #3b82f6;\r\n\t\tbackground: white;\r\n\t}\r\n\t\r\n\t.map-section {\r\n\t\tbackground: white;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t\r\n\t.section-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.section-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #374151;\r\n\t}\r\n\t\r\n\t.map-controls {\r\n\t\tdisplay: flex;\r\n\t\tgap: 15rpx;\r\n\t}\r\n\t\r\n\t.map-control-btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\tpadding: 12rpx 20rpx;\r\n\t\tborder: 1rpx solid #d1d5db;\r\n\t\tborder-radius: 8rpx;\r\n\t\tbackground: white;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #374151;\r\n\t}\r\n\t\r\n\t.clear-btn {\r\n\t\tcolor: #ef4444;\r\n\t\tborder-color: #ef4444;\r\n\t}\r\n\t\r\n\t.map-container {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 400rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.tencent-map {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t\r\n\t.map-loading {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground: rgba(255, 255, 255, 0.9);\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tgap: 20rpx;\r\n\t\tcolor: #6b7280;\r\n\t}\r\n\t\r\n\t.map-coordinates {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbackground: rgba(0, 0, 0, 0.8);\r\n\t\tpadding: 15rpx;\r\n\t\tcolor: white;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\t\r\n\t.content-section {\r\n\t\tbackground: white;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t\r\n\t.ai-generate-btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\tpadding: 12rpx 20rpx;\r\n\t\tbackground: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tborder-radius: 8rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 500;\r\n\t\ttransition: all 0.3s ease;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(245, 158, 11, 0.3);\r\n\t}\r\n\t\r\n\t.ai-generate-btn:active {\r\n\t\ttransform: translateY(1rpx);\r\n\t\tbox-shadow: 0 1rpx 4rpx rgba(245, 158, 11, 0.3);\r\n\t}\r\n\t\r\n\t.ai-generate-btn:disabled {\r\n\t\tbackground: linear-gradient(135deg, #cccccc 0%, #bbbbbb 100%);\r\n\t\tbox-shadow: none;\r\n\t}\r\n\t\r\n\t.content-textarea {\r\n\t\twidth: 100%;\r\n\t\theight: 300rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tborder: 1rpx solid #d1d5db;\r\n\t\tborder-radius: 8rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tbackground: #f9fafb;\r\n\t\tresize: none;\r\n\t}\r\n\t\r\n\t.word-count {\r\n\t\ttext-align: right;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #6b7280;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\t\r\n\t.tags-section {\r\n\t\tbackground: white;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t\r\n\t.tags-input-container {\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.tags-input {\r\n\t\twidth: 100%;\r\n\t\tpadding: 20rpx;\r\n\t\tborder: 1rpx solid #d1d5db;\r\n\t\tborder-radius: 8rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tbackground: #f9fafb;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\t\r\n\t.tags-hint {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #6b7280;\r\n\t}\r\n\t\r\n\t.tags-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 15rpx;\r\n\t}\r\n\t\r\n\t.tag-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 10rpx;\r\n\t\tpadding: 12rpx 20rpx;\r\n\t\tbackground: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);\r\n\t\tcolor: white;\r\n\t\tborder-radius: 20rpx;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\t\r\n\t.tag-remove {\r\n\t\tcursor: pointer;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: bold;\r\n\t\tpadding: 0 5rpx;\r\n\t}\r\n\t\r\n\t/* é¢„è§ˆæ¨¡å¼æ ·å¼ */\r\n\t.template-detail-container {\r\n\t\tmin-height: 100vh;\r\n\t\tbackground: #f8fafc;\r\n\t}\r\n\t\r\n\t.detail-header {\r\n\t\theight: 200rpx;\r\n\t\tbackground: white;\r\n\t\tborder-bottom: 1rpx solid #e5e7eb;\r\n\t\tpadding: 30rpx;\r\n\t\tposition: sticky;\r\n\t\ttop: 0;\r\n\t\tz-index: 100;\r\n\t}\r\n\t\r\n\t.header-top-row {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.detail-content {\r\n\t\theight: calc(100vh - 200rpx);\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\t\r\n\t.travel-guide-card {\r\n\t\tbackground: white;\r\n\t\tborder-radius: 16rpx;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.1);\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t\r\n\t.banner-section {\r\n\t\tposition: relative;\r\n\t\theight: 400rpx;\r\n\t}\r\n\t\r\n\t.banner-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t\r\n\t.banner-overlay {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.6) 100%);\r\n\t}\r\n\t\r\n\t.banner-content {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tpadding: 40rpx;\r\n\t\tcolor: white;\r\n\t}\r\n\t\r\n\t.guide-title {\r\n\t\tfont-size: 40rpx;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.guide-subtitle {\r\n\t\tfont-size: 28rpx;\r\n\t\topacity: 0.9;\r\n\t}\r\n\t\r\n\t.days-section {\r\n\t\tpadding: 30rpx;\r\n\t}\r\n\t\r\n\t.days-actions {\r\n\t\tdisplay: flex;\r\n\t\tgap: 15rpx;\r\n\t}\r\n\t\r\n\t.days-container {\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\t\r\n\t.day-item {\r\n\t\tmargin-bottom: 30rpx;\r\n\t\tborder: 1rpx solid #e5e7eb;\r\n\t\tborder-radius: 12rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.day-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 20rpx;\r\n\t\tpadding: 25rpx;\r\n\t\tbackground: #f9fafb;\r\n\t\tcursor: pointer;\r\n\t\ttransition: background 0.3s ease;\r\n\t}\r\n\t\r\n\t.day-header:active {\r\n\t\tbackground: #f3f4f6;\r\n\t}\r\n\t\r\n\t.day-badge {\r\n\t\tbackground: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);\r\n\t\tcolor: white;\r\n\t\tpadding: 8rpx 16rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tfont-size: 22rpx;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\t\r\n\t.day-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #374151;\r\n\t\tflex: 1;\r\n\t}\r\n\t\r\n\t.day-expand-icon {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #6b7280;\r\n\t}\r\n\t\r\n\t.day-content {\r\n\t\tpadding: 25rpx;\r\n\t\tbackground: white;\r\n\t}\r\n\t\r\n\t.attractions-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\t\r\n\t.attraction-item {\r\n\t\tborder: 1rpx solid #f3f4f6;\r\n\t\tborder-radius: 8rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.attraction-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 15rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tbackground: #f9fafb;\r\n\t\tcursor: pointer;\r\n\t\ttransition: background 0.3s ease;\r\n\t}\r\n\t\r\n\t.attraction-header:active {\r\n\t\tbackground: #f3f4f6;\r\n\t}\r\n\t\r\n\t.attraction-order {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tbackground: linear-gradient(135deg, #10b981 0%, #059669 100%);\r\n\t\tcolor: white;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tborder-radius: 50%;\r\n\t\tfont-size: 20rpx;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\t\r\n\t.attraction-name {\r\n\t\tfont-size: 26rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #374151;\r\n\t\tflex: 1;\r\n\t}\r\n\t\r\n\t.attraction-expand-icon {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #6b7280;\r\n\t}\r\n\t\r\n\t.attraction-details {\r\n\t\tpadding: 20rpx;\r\n\t\tbackground: white;\r\n\t\tborder-top: 1rpx solid #f3f4f6;\r\n\t}\r\n\t\r\n\t.attraction-description {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #6b7280;\r\n\t\tline-height: 1.6;\r\n\t\tmargin-bottom: 15rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.attraction-meta {\r\n\t\tdisplay: flex;\r\n\t\tgap: 20rpx;\r\n\t\tmargin-bottom: 15rpx;\r\n\t}\r\n\t\r\n\t.attraction-duration,\r\n\t.coordinates-status {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #6b7280;\r\n\t}\r\n\t\r\n\t.has-coordinates {\r\n\t\tcolor: #10b981;\r\n\t}\r\n\t\r\n\t.no-coordinates {\r\n\t\tcolor: #ef4444;\r\n\t}\r\n\t\r\n\t.transportation-preview {\r\n\t\tbackground: #f8fafc;\r\n\t\tpadding: 15rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t}\r\n\t\r\n\t.transportation-title {\r\n\t\tfont-size: 22rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #374151;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.transportation-options {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\t\r\n\t.transportation-option {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #6b7280;\r\n\t}\r\n\t\r\n\t.no-data-tips {\r\n\t\ttext-align: center;\r\n\t\tpadding: 60rpx 30rpx;\r\n\t\tcolor: #9ca3af;\r\n\t}\r\n\t\r\n\t.no-data-icon {\r\n\t\tfont-size: 64rpx;\r\n\t\tdisplay: block;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.content-section {\r\n\t\tpadding: 30rpx;\r\n\t\tborder-top: 1rpx solid #f3f4f6;\r\n\t}\r\n\t\r\n\t.content-text {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #4b5563;\r\n\t\tline-height: 1.6;\r\n\t\twhite-space: pre-wrap;\r\n\t}\r\n\t\r\n\t.tags-section {\r\n\t\tpadding: 30rpx;\r\n\t\tborder-top: 1rpx solid #f3f4f6;\r\n\t}\r\n\t\r\n\t.tips-section {\r\n\t\tpadding: 30rpx;\r\n\t\tborder-top: 1rpx solid #f3f4f6;\r\n\t}\r\n\t\r\n\t.tips-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #374151;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.tips-list {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 15rpx;\r\n\t}\r\n\t\r\n\t.tip-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 15rpx;\r\n\t\tpadding: 15rpx;\r\n\t\tbackground: #f8fafc;\r\n\t\tborder-radius: 8rpx;\r\n\t}\r\n\t\r\n\t.tip-icon {\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\t\r\n\t.tip-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #6b7280;\r\n\t\tflex: 1;\r\n\t}\r\n\t\r\n\t.map-section {\r\n\t\tpadding: 30rpx;\r\n\t\tborder-top: 1rpx solid #f3f4f6;\r\n\t}\r\n\t\r\n\t/* å¼¹çª—æ ·å¼ */\r\n\t.map-modal,\r\n\t.transportation-modal {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tz-index: 1000;\r\n\t}\r\n\t\r\n\t.modal-overlay {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground: rgba(0, 0, 0, 0.5);\r\n\t}\r\n\t\r\n\t.modal-content {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\twidth: 90vw;\r\n\t\tmax-width: 600rpx;\r\n\t\theight: 80vh;\r\n\t\tbackground: white;\r\n\t\tborder-radius: 16rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.modal-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 30rpx;\r\n\t\tborder-bottom: 1rpx solid #e5e7eb;\r\n\t\tbackground: #f9fafb;\r\n\t}\r\n\t\r\n\t.modal-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #374151;\r\n\t\tflex: 1;\r\n\t}\r\n\t\r\n\t.modal-close {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: #e5e7eb;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #6b7280;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t\r\n\t.modal-close:active {\r\n\t\tbackground: rgba(255, 255, 255, 0.3);\r\n\t}\r\n\t\r\n\t/* æ›´å¤šæ ·å¼å®šä¹‰... */\r\n</style>","import MiniProgramPage from 'D:/pbl2/tripself/pbl2tirpself/pages/guide/edit/edit.vue'\nwx.createPage(MiniProgramPage)"],"names":["mapConfig","guideService","uni","aiService"],"mappings":"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"}