{"version":3,"file":"guide.js","sources":["pages/guide/guide.vue","../../../Adownloads/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZ3VpZGUvZ3VpZGUudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"guide-container\">\r\n\t\t<view class=\"guide-header\">\r\n\t\t\t<text class=\"header-title\">ÊàëÁöÑÊîªÁï•</text>\r\n\t\t\t<view class=\"header-actions\">\r\n\t\t\t\t<button class=\"create-btn\" @click=\"createGuide\">\r\n\t\t\t\t\t<text class=\"btn-icon\">+</text>\r\n\t\t\t\t\t<text class=\"btn-text\">Êñ∞Âª∫ÊîªÁï•</text>\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"search-section\">\r\n\t\t\t<view class=\"search-input\">\r\n\t\t\t\t<text class=\"search-icon\">üîç</text>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"search-field\" \r\n\t\t\t\t\tplaceholder=\"ÊêúÁ¥¢ÊîªÁï•Ê†áÈ¢ò„ÄÅÁõÆÁöÑÂú∞ÊàñÊ†áÁ≠æ\"\r\n\t\t\t\t\t@input=\"onSearchInput\"\r\n\t\t\t\t\t:value=\"searchKeyword\"\r\n\t\t\t\t/>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"guide-list\">\r\n\t\t\t<view v-if=\"filteredGuides.length === 0\" class=\"empty-state\">\r\n\t\t\t\t<text class=\"empty-icon\">üìù</text>\r\n\t\t\t\t<text class=\"empty-text\">{{ searchKeyword ? 'Êú™ÊâæÂà∞Áõ∏ÂÖ≥ÊîªÁï•' : 'ÊöÇÊó†ÊîªÁï•' }}</text>\r\n\t\t\t\t<text class=\"empty-subtext\">{{ searchKeyword ? 'Â∞ùËØïÂÖ∂‰ªñÂÖ≥ÈîÆËØç' : 'ÁÇπÂáª\"Êñ∞Âª∫ÊîªÁï•\"ÂºÄÂßãÂàõÂª∫' }}</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view v-else class=\"guide-items\">\r\n\t\t\t\t<view \r\n\t\t\t\t\tv-for=\"guide in filteredGuides\" \r\n\t\t\t\t\t:key=\"guide.id\"\r\n\t\t\t\t\tclass=\"guide-item\"\r\n\t\t\t\t\t@click=\"viewGuideDetail(guide.id)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<view class=\"guide-image\">\r\n\t\t\t\t\t\t<image \r\n\t\t\t\t\t\t\tv-if=\"guide.imagePath\" \r\n\t\t\t\t\t\t\t:src=\"guide.imagePath\" \r\n\t\t\t\t\t\t\tmode=\"aspectFill\"\r\n\t\t\t\t\t\t\tclass=\"guide-img\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<view v-else class=\"guide-img-placeholder\">\r\n\t\t\t\t\t\t\t<text class=\"placeholder-icon\">üèûÔ∏è</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"guide-content\">\r\n\t\t\t\t\t\t<view class=\"guide-header-info\">\r\n\t\t\t\t\t\t\t<text class=\"guide-title\">{{ guide.title }}</text>\r\n\t\t\t\t\t\t\t<view class=\"guide-status\" :class=\"guide.status\">\r\n\t\t\t\t\t\t\t\t<text>{{ guide.status === 'published' ? 'Â∑≤ÂèëÂ∏É' : 'ËçâÁ®ø' }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<text class=\"guide-destination\">üìç {{ guide.destination || 'Êú™ËÆæÁΩÆÁõÆÁöÑÂú∞' }}</text>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"guide-meta\">\r\n\t\t\t\t\t\t\t<text class=\"meta-item\">{{ formatDate(guide.updateTime || guide.createTime) }}</text>\r\n\t\t\t\t\t\t\t<text class=\"meta-divider\">‚Ä¢</text>\r\n\t\t\t\t\t\t\t<text class=\"meta-item\">{{ guide.content ? guide.content.length + 'Â≠ó' : '0Â≠ó' }}</text>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view v-if=\"guide.tags && guide.tags.length > 0\" class=\"guide-tags\">\r\n\t\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\t\tv-for=\"(tag, index) in guide.tags.slice(0, 3)\" \r\n\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\tclass=\"tag\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<text class=\"tag-text\">{{ tag }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text v-if=\"guide.tags.length > 3\" class=\"tag-more\">+{{ guide.tags.length - 3 }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"guide-actions\">\r\n\t\t\t\t\t\t<button class=\"action-btn edit-btn\" @click.stop=\"editGuide(guide.id)\">\r\n\t\t\t\t\t\t\t<text class=\"action-icon\">‚úèÔ∏è</text>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class=\"action-btn delete-btn\" @click.stop=\"deleteGuide(guide.id)\">\r\n\t\t\t\t\t\t\t<text class=\"action-icon\">üóëÔ∏è</text>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport guideService from '@/services/guideService.js'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tguides: [],\r\n\t\t\t\tsearchKeyword: '',\r\n\t\t\t\tfilteredGuides: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// Âä†ËΩΩÊîªÁï•ÂàóË°®\r\n\t\t\tloadGuides() {\r\n\t\t\t\tthis.guides = guideService.getUserGuides();\r\n\t\t\t\tthis.filterGuides();\r\n\t\t\t},\r\n\r\n\t\t\t// ÊêúÁ¥¢ËæìÂÖ•Â§ÑÁêÜ\r\n\t\t\tonSearchInput(e) {\r\n\t\t\t\tthis.searchKeyword = e.detail.value;\r\n\t\t\t\tthis.filterGuides();\r\n\t\t\t},\r\n\r\n\t\t\t// ËøáÊª§ÊîªÁï•\r\n\t\t\tfilterGuides() {\r\n\t\t\t\tif (this.searchKeyword) {\r\n\t\t\t\t\tthis.filteredGuides = guideService.searchGuides(this.searchKeyword);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.filteredGuides = [...this.guides];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// ÂàõÂª∫Êñ∞ÊîªÁï•\r\n\t\t\tcreateGuide() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/create/create'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// Êü•ÁúãÊîªÁï•ËØ¶ÊÉÖ\r\n\t\t\tviewGuideDetail(guideId) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/guide/detail/detail?id=${guideId}`\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// ÁºñËæëÊîªÁï•\r\n\t\t\teditGuide(guideId) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/create/create?id=${guideId}&mode=edit`\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// Âà†Èô§ÊîªÁï•\r\n\t\t\tdeleteGuide(guideId) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: 'Á°ÆËÆ§Âà†Èô§',\r\n\t\t\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ÊîªÁï•ÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§ç„ÄÇ',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tconst success = guideService.deleteGuide(guideId);\r\n\t\t\t\t\t\t\tif (success) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: 'Âà†Èô§ÊàêÂäü',\r\n\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.loadGuides();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: 'Âà†Èô§Â§±Ë¥•',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// Ê†ºÂºèÂåñÊó•Êúü\r\n\t\t\tformatDate(dateString) {\r\n\t\t\t\tconst date = new Date(dateString);\r\n\t\t\t\tconst now = new Date();\r\n\t\t\t\tconst diff = now - date;\r\n\t\t\t\t\r\n\t\t\t\tif (diff < 60000) return 'ÂàöÂàö';\r\n\t\t\t\tif (diff < 3600000) return Math.floor(diff / 60000) + 'ÂàÜÈíüÂâç';\r\n\t\t\t\tif (diff < 86400000) return Math.floor(diff / 3600000) + 'Â∞èÊó∂Ââç';\r\n\t\t\t\tif (diff < 604800000) return Math.floor(diff / 86400000) + 'Â§©Ââç';\r\n\t\t\t\t\r\n\t\t\t\treturn date.getFullYear() + '-' + \r\n\t\t\t\t\t(date.getMonth() + 1).toString().padStart(2, '0') + '-' + \r\n\t\t\t\t\tdate.getDate().toString().padStart(2, '0');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.loadGuides();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.guide-container {\r\n\t\tmin-height: 100vh;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tpadding: 30rpx;\r\n\t}\r\n\r\n\t.guide-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.header-title {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.create-btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground: linear-gradient(135deg, #1A9E8F, #2BB8A9);\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tborder-radius: 10rpx;\r\n\t\tpadding: 15rpx 25rpx;\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t.btn-icon {\r\n\t\tmargin-right: 8rpx;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\r\n\t.search-section {\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.search-input {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground: white;\r\n\t\tborder-radius: 15rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);\r\n\t}\r\n\r\n\t.search-icon {\r\n\t\tfont-size: 28rpx;\r\n\t\tmargin-right: 15rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.search-field {\r\n\t\tflex: 1;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.empty-state {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 100rpx 0;\r\n\t}\r\n\r\n\t.empty-icon {\r\n\t\tfont-size: 80rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\topacity: 0.5;\r\n\t}\r\n\r\n\t.empty-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\t.empty-subtext {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.guide-item {\r\n\t\tdisplay: flex;\r\n\t\tbackground: white;\r\n\t\tborder-radius: 15rpx;\r\n\t\tpadding: 25rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);\r\n\t}\r\n\r\n\t.guide-image {\r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\toverflow: hidden;\r\n\t\tmargin-right: 20rpx;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.guide-img {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.guide-img-placeholder {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground: linear-gradient(135deg, #f0f0f0, #e0e0e0);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.placeholder-icon {\r\n\t\tfont-size: 40rpx;\r\n\t\topacity: 0.5;\r\n\t}\r\n\r\n\t.guide-content {\r\n\t\tflex: 1;\r\n\t\tmin-width: 0;\r\n\t}\r\n\r\n\t.guide-header-info {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: flex-start;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\t.guide-title {\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t\tflex: 1;\r\n\t\tmargin-right: 15rpx;\r\n\t}\r\n\r\n\t.guide-status {\r\n\t\tfont-size: 20rpx;\r\n\t\tpadding: 4rpx 12rpx;\r\n\t\tborder-radius: 6rpx;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.guide-status.published {\r\n\t\tbackground: #e8f5e8;\r\n\t\tcolor: #52c41a;\r\n\t}\r\n\r\n\t.guide-status.draft {\r\n\t\tbackground: #fff7e6;\r\n\t\tcolor: #fa8c16;\r\n\t}\r\n\r\n\t.guide-destination {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #666;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.guide-meta {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\t.meta-item {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.meta-divider {\r\n\t\tmargin: 0 10rpx;\r\n\t\tcolor: #ddd;\r\n\t\tfont-size: 20rpx;\r\n\t}\r\n\r\n\t.guide-tags {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\r\n\t.tag {\r\n\t\tbackground: #f0f2f5;\r\n\t\tborder-radius: 6rpx;\r\n\t\tpadding: 4rpx 10rpx;\r\n\t}\r\n\r\n\t.tag-text {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.tag-more {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.guide-actions {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 10rpx;\r\n\t\tmargin-left: 15rpx;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.action-btn {\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tborder: none;\r\n\t\tborder-radius: 8rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.edit-btn {\r\n\t\tbackground: #e6f7ff;\r\n\t\tcolor: #1890ff;\r\n\t}\r\n\r\n\t.delete-btn {\r\n\t\tbackground: #fff2f0;\r\n\t\tcolor: #ff4d4f;\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/pbl2/tripself/pbl2tirpself/pages/guide/guide.vue'\nwx.createPage(MiniProgramPage)"],"names":["guideService","uni"],"mappings":";;;AA+FC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,QAAQ,CAAE;AAAA,MACV,eAAe;AAAA,MACf,gBAAgB,CAAC;AAAA,IAClB;AAAA,EACA;AAAA,EACD,SAAS;AAAA;AAAA,IAER,aAAa;AACZ,WAAK,SAASA,mCAAa;AAC3B,WAAK,aAAY;AAAA,IACjB;AAAA;AAAA,IAGD,cAAc,GAAG;AAChB,WAAK,gBAAgB,EAAE,OAAO;AAC9B,WAAK,aAAY;AAAA,IACjB;AAAA;AAAA,IAGD,eAAe;AACd,UAAI,KAAK,eAAe;AACvB,aAAK,iBAAiBA,sBAAY,aAAC,aAAa,KAAK,aAAa;AAAA,aAC5D;AACN,aAAK,iBAAiB,CAAC,GAAG,KAAK,MAAM;AAAA,MACtC;AAAA,IACA;AAAA;AAAA,IAGD,cAAc;AACbC,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACN,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,gBAAgB,SAAS;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,iCAAiC,OAAO;AAAA,MAC9C,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,UAAU,SAAS;AAClBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,2BAA2B,OAAO;AAAA,MACxC,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,YAAY,SAAS;AACpBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChB,kBAAM,UAAUD,sBAAAA,aAAa,YAAY,OAAO;AAChD,gBAAI,SAAS;AACZC,4BAAAA,MAAI,UAAU;AAAA,gBACb,OAAO;AAAA,gBACP,MAAM;AAAA,cACP,CAAC;AACD,mBAAK,WAAU;AAAA,mBACT;AACNA,4BAAAA,MAAI,UAAU;AAAA,gBACb,OAAO;AAAA,gBACP,MAAM;AAAA,cACP,CAAC;AAAA,YACF;AAAA,UACD;AAAA,QACD;AAAA,MACD,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,WAAW,YAAY;AACtB,YAAM,OAAO,IAAI,KAAK,UAAU;AAChC,YAAM,MAAM,oBAAI;AAChB,YAAM,OAAO,MAAM;AAEnB,UAAI,OAAO;AAAO,eAAO;AACzB,UAAI,OAAO;AAAS,eAAO,KAAK,MAAM,OAAO,GAAK,IAAI;AACtD,UAAI,OAAO;AAAU,eAAO,KAAK,MAAM,OAAO,IAAO,IAAI;AACzD,UAAI,OAAO;AAAW,eAAO,KAAK,MAAM,OAAO,KAAQ,IAAI;AAE3D,aAAO,KAAK,YAAW,IAAK,OAC1B,KAAK,aAAa,GAAG,SAAU,EAAC,SAAS,GAAG,GAAG,IAAI,MACpD,KAAK,QAAO,EAAG,SAAQ,EAAG,SAAS,GAAG,GAAG;AAAA,IAC3C;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,WAAU;AAAA,EAChB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7LD,GAAG,WAAW,eAAe;"}