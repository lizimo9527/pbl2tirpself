<view class="edit-container"><view wx:if="{{a}}"><view class="edit-header"><view class="header-back" bindtap="{{b}}"><text class="back-icon">←</text><text class="back-text">返回</text></view><view class="header-title">{{c}}</view><view class="header-actions"><button wx:if="{{d}}" class="action-btn preview-btn" bindtap="{{e}}"><text class="action-icon">👁️</text><text class="action-text">预览</text></button><button class="action-btn save-btn" bindtap="{{f}}"><text class="action-icon">💾</text><text class="action-text">保存草稿</text></button><button class="action-btn publish-btn" bindtap="{{g}}"><text class="action-icon">🚀</text><text class="action-text">发布</text></button></view></view><scroll-view class="edit-content" scroll-y><view class="cover-section"><view class="cover-upload"><view wx:if="{{h}}" class="cover-placeholder" bindtap="{{i}}"><text class="placeholder-icon">🏞️</text><text class="placeholder-text">点击上传封面图片</text></view><view wx:else class="cover-preview"><image src="{{j}}" mode="aspectFill" class="cover-image"/><view class="cover-overlay"><button class="cover-change-btn" bindtap="{{k}}">更换图片</button><button class="cover-remove-btn" bindtap="{{l}}">删除</button></view></view></view></view><view class="form-section"><view class="form-item"><text class="form-label">攻略标题</text><input class="form-input" placeholder="请输入攻略标题（必填）" bindinput="{{m}}" value="{{n}}"/></view><view class="form-item"><text class="form-label">目的地</text><input class="form-input" placeholder="请输入目的地（必填）" bindinput="{{o}}" value="{{p}}"/></view><view class="map-section"><view class="section-header"><text class="section-title">地图定位</text><view class="map-controls"><button class="map-control-btn" bindtap="{{q}}"><text class="map-btn-icon">📍</text><text>定位</text></button><button class="map-control-btn" bindtap="{{r}}"><text class="map-btn-icon">🔍</text><text>搜索</text></button><button class="map-control-btn clear-btn" bindtap="{{s}}"><text class="map-btn-icon">🗑️</text><text>清除</text></button></view></view><view class="map-container"><map id="editMap" longitude="{{t}}" latitude="{{v}}" scale="{{w}}" markers="{{x}}" polyline="{{y}}" show-location="{{true}}" enable-zoom="{{true}}" enable-scroll="{{true}}" class="tencent-map" bindtap="{{z}}" bindmarkertap="{{A}}"></map><view wx:if="{{B}}" class="map-loading"><text class="loading-icon">⏳</text><text class="loading-text">地图加载中...</text></view><view wx:if="{{C}}" class="map-coordinates"><text class="coordinate-text">📍 {{D}}</text><text class="coordinate-text">经度: {{E}} 纬度: {{F}}</text></view></view></view><view class="content-section"><view class="section-header"><text class="section-title">攻略内容</text><button class="ai-generate-btn" bindtap="{{H}}" disabled="{{I}}"><text class="ai-icon">🤖</text><text class="ai-text">{{G}}</text></button></view><block wx:if="{{r0}}"><textarea class="content-textarea" placeholder="请输入详细的攻略内容...（必填）" bindinput="{{J}}" value="{{K}}" maxlength="2000"/></block><view class="word-count">{{L}}/2000</view></view><view class="tags-section"><text class="section-title">标签</text><view class="tags-input-container"><input class="tags-input" placeholder="输入标签后按回车添加" bindinput="{{M}}" value="{{N}}" bindconfirm="{{O}}"/><text class="tags-hint">最多可添加5个标签</text></view><view class="tags-list"><view wx:for="{{P}}" wx:for-item="tag" wx:key="c" class="tag-item"><text class="tag-text">{{tag.a}}</text><text class="tag-remove" bindtap="{{tag.b}}">×</text></view></view></view></view></scroll-view></view><view wx:else class="template-detail-container"><view class="detail-header"><view class="header-top-row"><view class="header-back" bindtap="{{Q}}"><text class="back-icon">←</text><text class="back-text">返回编辑</text></view><view class="header-title">{{R}}</view><view style="width:120rpx"></view></view><view class="header-actions"><button class="action-btn save-btn" bindtap="{{S}}"><text class="action-icon">💾</text><text class="action-text">保存草稿</text></button><button class="action-btn publish-btn" bindtap="{{T}}"><text class="action-icon">🚀</text><text class="action-text">发布</text></button></view></view><scroll-view class="detail-content" scroll-y><view class="travel-guide-card"><view class="banner-section"><image src="{{U}}" mode="aspectFill" class="banner-image"/><view class="banner-overlay"></view><view class="banner-content"><text class="guide-title">{{V}}</text><text class="guide-subtitle">{{W}}</text></view></view><view class="days-section"><view class="section-header"><text class="section-title">行程安排</text><view wx:if="{{X}}" class="days-actions"><button wx:if="{{Y}}" class="action-btn batch-coordinates-btn" bindtap="{{Z}}"><text class="action-icon">📍</text><text class="action-text">批量添加坐标</text></button><button class="action-btn refresh-map-btn" bindtap="{{aa}}"><text class="action-icon">🔄</text><text class="action-text">刷新地图</text></button></view></view><view wx:if="{{ab}}" class="days-container"><view wx:for="{{ac}}" wx:for-item="day" wx:key="g" class="day-item"><view class="day-header" bindtap="{{day.d}}"><view class="day-badge"><text class="day-number">第{{day.a}}天</text></view><text class="day-title">{{day.b}}</text><text class="day-expand-icon">{{day.c}}</text></view><view wx:if="{{day.e}}" class="day-content"><view class="attractions-list"><view wx:for="{{day.f}}" wx:for-item="attraction" wx:key="s" class="attraction-item"><view class="attraction-header" bindtap="{{attraction.d}}"><view class="attraction-order">{{attraction.a}}</view><text class="attraction-name">{{attraction.b}}</text><text class="attraction-expand-icon">{{attraction.c}}</text></view><view wx:if="{{attraction.e}}" class="{{['attraction-details', attraction.r && 'expanded']}}"><text class="attraction-description">{{attraction.f}}</text><view class="attraction-meta"><text class="attraction-duration">⏱️ {{attraction.g}}</text><text class="{{['coordinates-status', attraction.i && 'has-coordinates', attraction.j && 'no-coordinates']}}">{{attraction.h}}</text></view><view class="transportation-preview"><text class="transportation-title">🚗 交通方式：</text><view class="transportation-options"><text wx:if="{{attraction.k}}" class="transportation-option"> 🚇 地铁：{{attraction.l}}，费用{{attraction.m}}</text><text wx:if="{{attraction.n}}" class="transportation-option"> 🚕 出租车：{{attraction.o}}，费用{{attraction.p}}</text><text wx:if="{{attraction.q}}" class="transportation-option"> 暂无交通信息 </text></view></view></view></view></view></view></view></view><view wx:else class="no-data-tips"><text class="no-data-icon">📝</text><text class="no-data-text">暂无行程安排，请先编辑攻略内容</text></view></view><view class="content-section"><view class="section-header"><text class="section-title">攻略内容</text></view><view class="content-text">{{ad}}</view></view><view wx:if="{{ae}}" class="tags-section"><text class="section-title">标签</text><view class="tags-list"><view wx:for="{{af}}" wx:for-item="tag" wx:key="b" class="tag-item"><text class="tag-text">{{tag.a}}</text></view></view></view><view class="tips-section"><text class="tips-title">旅行小贴士</text><view class="tips-list"><view class="tip-item"><text class="tip-icon">ℹ️</text><text class="tip-text">建议提前规划行程，合理安排时间</text></view><view class="tip-item"><text class="tip-icon">📍</text><text class="tip-text">携带必要的旅行用品和药品</text></view><view class="tip-item"><text class="tip-icon">☀️</text><text class="tip-text">根据天气情况准备合适的衣物</text></view><view class="tip-item"><text class="tip-icon">🍽️</text><text class="tip-text">品尝当地特色美食，体验地道文化</text></view></view></view><view class="map-section"><view class="section-header"><text class="section-title">行程地图</text><button class="map-control-btn" bindtap="{{ag}}"><text class="map-btn-icon">🗺️</text><text>查看大图</text></button></view><view class="map-container"><map id="previewMap" longitude="{{ah}}" latitude="{{ai}}" scale="{{aj}}" markers="{{ak}}" polyline="{{al}}" show-location="{{true}}" class="tencent-map"></map></view></view></view></scroll-view></view><view wx:if="{{am}}" class="map-modal"><view class="modal-overlay" bindtap="{{an}}"></view><view class="modal-content"><view class="modal-header"><text class="modal-title">{{ao}} - 行程地图</text><view class="modal-close" bindtap="{{ap}}"><text>×</text></view></view><view class="map-container"><map longitude="{{aq}}" latitude="{{ar}}" scale="{{as}}" markers="{{at}}" polyline="{{av}}" show-location="{{true}}" class="detail-map"></map></view></view></view><view wx:if="{{aw}}" class="transportation-modal"><view class="modal-overlay" bindtap="{{ax}}"></view><view class="modal-content"><view class="modal-header"><text class="modal-title">{{ay}} - 交通方式</text><view class="modal-close" bindtap="{{az}}"><text>×</text></view></view><view class="transportation-options"><view class="transportation-item subway"><text class="transportation-icon">🚇</text><view class="transportation-info"><text class="transportation-title">地铁</text><text class="transportation-details">预计时间：{{aA}}</text><text class="transportation-details">预计费用：{{aB}}</text></view></view><view class="transportation-item taxi"><text class="transportation-icon">🚕</text><view class="transportation-info"><text class="transportation-title">出租车</text><text class="transportation-details">预计时间：{{aC}}</text><text class="transportation-details">预计费用：{{aD}}</text></view></view></view></view></view></view>